<!DOCTYPE html>
<html lang="hi">
<!-- {% load static %} -->

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="shortcut icon" href="{% static 'register_samautkarsh/assets/img/Samutkarsh_logo.png' %}"
      type="image/x-icon" />
   <title>पंजीकरण फॉर्म</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link
      href="https://fonts.googleapis.com/css2?family=Arya:wght@400;700&family=Caudex:ital,wght@0,400;0,700;1,400;1,700&family=Forum&family=Hind:wght@300;400;500;600;700&family=Laila:wght@300;400;500;600;700&family=Palanquin+Dark:wght@400;500;600;700&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Yatra+One&display=swap"
      rel="stylesheet">

   <!-- SweetAlert2 CSS -->
   <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.21/dist/sweetalert2.min.css" rel="stylesheet">

   <!-- Select2 CSS -->
   <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

   <!-- Bootstrap 5 CSS (For table styling) -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

   <!-- Font Awesome CDN -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

   <style>
      body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px 10px;
        background-repeat: no-repeat;
        background-size: contain;
        background-size: 100% 100%;
        background-position: center center;
        font-family: 'Hind', sans-serif;
        background: linear-gradient(135deg, #B22222 10%, #FFA500 30%, #FF4500 50%);
      }

      .card-body {
         height: 0;
         opacity: 0;
         padding: 0;
         overflow: hidden;
         background-color: #FFF8E1;
      }

      .card-header {
         margin: 10px;
         color: rgb(235, 77, 77);
         font-weight: 700;
         background-color: #FFF8E1;
      }

      .card-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         cursor: pointer;
         user-select: none;
      }
       .card-header.disabled {
         color: rgb(239, 118, 118);; 
         background-color: #f0f0f0; 
         cursor: not-allowed;
         opacity: 0.6; 
         pointer-events: none; 
      }
      .card-title{
        font-size: 16px !important;
        text-decoration: underline;
        color: #8B0000 !important;
      }

      .toggle-icon {
         font-size: 16px;
         margin-left: 8px;
      }

      #particles {
         position: absolute;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         z-index: 0;
         opacity: 0.7;
         pointer-events: none;
      }

      .particle {
         position: absolute;
         background: rgba(255, 255, 255, 0.5);
         border-radius: 50%;
         will-change: transform;
      }

      .form-container {
         background: rgba(255, 255, 255, 0.9);
         width: 100%;
         border-radius: 12px;
         padding: 30px;
         max-width: 768px;
         margin: auto;
         transition: transform 0.3s ease-in-out;
      }

      .form-label {
         font-size: 16px !important;
         font-weight: 900;
         color: #333;
      }

      .form-control,
      .form-select {
         font-size: 16px;
         color: #868686;
      }

      .form-select input {
         font-size: 14px;
      }

      .form-select option {
         font-size: 14px;
         color: #868686;
      }

      .form-control:focus {
         border-color: #ff9800 !important;
         box-shadow: 0px 0px 5px rgba(255, 152, 0, 0.75) !important;
      }

      .form-select:focus {
         border-color: #ff9800 !important;
         box-shadow: 0px 0px 5px rgba(255, 152, 0, 0.75) !important;
         outline: none !important;
      }

      .hidden {
         display: none;
      }

      .form-check-input:focus {
         box-shadow: none !important;
         outline: none !important;
         border-color: transparent !important;
      }

      .form-check-input {
         width: 16px;
         height: 16px;
         border: 2px solid #ccc !important;
         background-color: white !important;
         transition: all 0.3s ease-in-out;
         appearance: none;
        -webkit-appearance: none;
         -moz-appearance: none;
         cursor: pointer;
         position: relative;
      }

      .form-check-input[type="checkbox"] {
         border-radius: 4px;
      }

      .form-check-input[type="radio"] {
         border-radius: 50%;
      }

      .form-check-input:not(:checked) {
         background-color: white !important;
         border: 2px solid #ccc !important;
      }

      .form-check-input:checked {
         border-color: #ff9800 !important;
         background-color: #ff9800 !important;
      }

      .form-check-input[type="checkbox"]:checked::before {
         content: "";
         width: 10px;
         height: 10px;
         background-color: white;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
      }

      .form-check-input[type="radio"]:checked::before {
         content: "";
         width: 8px;
         height: 8px;
         background-color: white;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         border-radius: 50%;
      }

      .modal-content {
         background: #f8f9fa;
         border-radius: 8px;
         padding: 20px;
      }

      .table-striped tbody tr:nth-of-type(odd) {
         background-color: #f2f2f2;
      }

      .table td {
         vertical-align: middle;
      }

      .modal-footer {
         background: #e9ecef;
         padding: 15px;
         border-top: 1px solid #dee2e6;
      }

      .modal {
         display: none;
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.5);
         display: flex;
         justify-content: center;
         align-items: center;
         z-index: 1000;
         padding: 10px;       
         box-sizing: border-box; 
      }

      .modal-content {
         background: white;
         padding: 20px;
         border-radius: 10px;
         width: 50%;
         max-height: 80vh;
         overflow-y: auto;
         margin: 5% auto;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
         transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
         .modal-content {
            width: 70%;
         }
      }

      @media (max-width: 768px) {
         .modal-content {
            width: 90%;
            max-height: 90vh;
         }
      }

      @media (max-width: 480px) {
         .modal-content {
            width: 95%;
            padding: 15px;
         }
      }

      .modal-title {
         color: #8B0000;
         font-weight: bold;
         text-align: center;
         margin-bottom: 20px;
      }

      .modal-body p {
         margin: 10px 0;
         font-size: 14px;
      }

      .modal-footer {
         display: flex;
         justify-content: flex-end;
         margin-top: 20px;
      }

      .btn {
         padding: 8px 16px;
         margin-left: 10px;
         border: none;
         border-radius: 4px;
         cursor: pointer;
         font-size: 14px;
      }

      .close-modal {
         float: left;
         font-size: 40px;
         cursor: pointer;
      }

      .form-control,
      .form-select {
         font-size: 16px !important;
         color: #2d3748 !important;
         font-weight: 400 !important;
         padding: 10px 15px !important;
         border: 1px solid #e2e8f0 !important;
         border-radius: 8px !important;
         background: rgba(255, 255, 255, 1);
         transition: all 0.3s ease !important;
         box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important;
      }

      .form-control:hover,
      .form-select:hover {
         border-color: #cbd5e0 !important;
         box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
      }

      .form-control:focus,
      .form-select:focus {
         border-color: #FF9800 !important;
         box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2) !important;
         outline: none !important;
         background-color: #ffffff !important;
      }

      .hidden-checkbox {
         display: none;
      }
   </style>
</head>

<body>
   <!-- This is Header Section -->
   <div id="particles"></div>
   <div class="form-container">
        <div class="text-center mb-5">
            <!-- Logo Image Section -->
            <div class="text-center mb-3" style="display: flex; justify-content: center; align-items: center;">
                <img src="{% static '/register_samautkarsh/assets/img/Samutkarsh_logo.png' %}" alt="RSS Delhi Prant"style="width: 150px; height: 150px; margin-right: 10px; border-radius: 50%; object-fit: cover;">
            </div>
        </div>
        <hr style="border: none; height: 2px; background-color: #FF9800; margin: 20px 0;">
        <!-- End Header Section -->

        <form id="myForm" method="POST" action="" enctype="multipart/form-data" autofocus>
            {% csrf_token %}
            <!-- Hidden Phone Number Passing -->
            <input type="text" name="phone_number" style="display: none;" value={{phone_number}} hidden>

            <div class="row">
                <div class="col-md-12 mb-3" id="referralCode-container">
                    <label for="referralCode" class="form-label"style="font-size: 16px !important; font-weight: 700; color: #333;">रेफरल कोड <i><small class="text-secondary text-italic">(Referral Code) </small></i> <span class="text-danger">*</span></label>
                    <input type="text" id="referralCode" class="form-control" placeholder="रेफरल कोड (यदि कोई हो तो)" name="referral_code"value="{{ form.referral_code.value|default_if_none:'' }}" maxlength="6" autofocus>
                    <small id="referralCodeError" class="text-danger" style="display: none; font-size: 12px;">"Please enter valid referral code."</small>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header fw-bold " data-toggle-target="card_body_1" id="personal_tab"><span>व्यक्तिगत जानकारी
                    / Personal Information</span>
                <span class="toggle-icon">
                    <i class="fas fa-plus"></i>
                </span>
                </div>
                <div class="card-body" id="card_body_1">
                    <div class="row">
                        <!-- First Name -->
                        <div class="col-md-6 mb-3" id="name-container">
                            <label for="name" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">नाम <i><small class="text-secondary ">(First Name) </small></i> <span class="text-danger">*</span></label>
                            <input type="text" id="name" class="form-control" placeholder="example: Ramesh..." name="name"value="{{ form.name.value|default_if_none:'' }}" autofocus>
                            <small id="nameError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter a valid First Name (only alphabets and spaces are allowed).</small>
                        </div>

                        <!-- Last Name -->
                        <div class="col-md-6 mb-3" id="lastName-container">
                            <label for="name" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">उप-नाम <i><small class="text-secondary ">(Last Name) </small></i> <span class="text-danger">*</span></label>
                            <input type="text" id="lastName" class="form-control" placeholder="example: Patil..." name="last_name" value="{{ form.last_name.value|default_if_none:'' }}" autofocus>
                            <small id="lastNameError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter a valid Last Name (only alphabets and spaces are allowed).</small>
                        </div>

                        <!-- जन्मतिथि -->
                        <div class="col-md-6 mb-3" id="dob-container">
                            <label for="dob" class="form-label " style="font-size: 16px !important; font-weight: 700; color: #333;">जन्मतिथि <i><small class="text-secondary ">(Date of Birth) </small></i><span class="text-danger"> *</span></label>
                            <input type="date" id="dob" name="dob" class="form-control" placeholder="example: dd/mm/yyyy" value="{{ form.dob.value|date:'Y-m-d'|default_if_none:'' }}" autofocus>
                            <small id="dobError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter date of birth.</small>
                        </div>

                        <!-- रक्त-गट / Blood Group  -->
                        <div class="col-md-6 mb-3" id="blood_group-container">
                            <label for="blood_group" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">रक्त-गट <i><small class="text-secondary ">(Blood Group) </small></i> <span class="text-danger">*</span></label>
                            <select id="blood_group" name="blood_group" class="form-control" autofocus>
                                <option value=""{% if not form.blood_group.value %}selected{% endif %} selected disabled>example: A+, O-</option>
                                <option value="O+" {% if form.blood_group.value == "O+" %}selected{% endif %}>O+</option>
                                <option value="O-"{% if form.blood_group.value == "O-" %}selected{% endif %}>O-</option>
                                <option value="A+" {% if form.blood_group.value == "A+" %}selected{% endif %}>A+</option>
                                <option value="A-"{% if form.blood_group.value == "A-" %}selected{% endif %}>A-</option>
                                <option value="B+" {% if form.blood_group.value == "B+" %}selected{% endif %}>B+</option>
                                <option value="B-"{% if form.blood_group.value == "B-" %}selected{% endif %}>B-</option>
                                <option value="AB+"{% if form.blood_group.value == "AB+" %}selected{% endif %}>AB+</option>
                                <option value="AB-"{% if form.blood_group.value == "AB-" %}selected{% endif %}>AB-</option>
                                <option value="जानकारी नहीं है" {% if form.blood_group.value == "जानकारी नहीं है" %}selected{% endif %}>जानकारी नहीं है</option>
                            </select>
                            <small id="blood_groupError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter blood group.</small>
                        </div>

                        <!-- श्रेणी (Profession) -->
                        <div class="col-md-6 mb-3" id="profession-container">
                            <label for="profession" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">श्रेणी <i><small class="text-secondary ">(Profession) </small></i><span class="text-danger"> *</span></label>
                            <select id="profession" name="user_type" class="form-control" autofocus>
                                    <option value="" {% if not form.user_type.value %}selected{% endif %} selected disabled>exapmle: व्यवसायी</option>
                                    <option value="स्कूल-विद्यार्थी" {% if form.user_type.value == "स्कूल-विद्यार्थी" %}selected{% endif %}>स्कूल-विद्यार्थी</option>
                                    <option value="कॉलेज-विद्यार्थी" {% if form.user_type.value == "कॉलेज-विद्यार्थी" %}selected{% endif %}>कॉलेज-विद्यार्थी</option>
                                    <option value="अध्यापक" {% if form.user_type.value == "अध्यापक" %}selected{% endif %}>अध्यापक</option>
                                    <option value="प्राध्यापक" {% if form.user_type.value == "प्राध्यापक" %}selected{% endif %}>प्राध्यापक</option>
                                    <!-- <option value="कर्मचारी (सरकारी)" {% if form.user_type.value == "कर्मचारी (सरकारी)" %}selected{% endif %}>कर्मचारी (सरकारी)</option>
                                    <option value="कर्मचारी (अन्य)" {% if form.user_type.value == "कर्मचारी (अन्य)" %}selected{% endif %}>कर्मचारी (अन्य)</option> -->
                                    <option value="सरकारी संस्थान में कार्यरत" {% if form.user_type.value == "सरकारी संस्थान में कार्यरत" %}selected{% endif %}>सरकारी संस्थान में कार्यरत</option>
                                    <option value="निजी संस्थान में कार्यरत" {% if form.user_type.value == "निजी संस्थान में कार्यरत" %}selected{% endif %}>निजी संस्थान में कार्यरत</option>
                                    <option value="सामाजिक संस्थान में कार्यरत" {% if form.user_type.value == "सामाजिक संस्थान में कार्यरत" %}selected{% endif %}>सामाजिक संस्थान में कार्यरत</option>
                                    <option value="व्यवसायी" {% if form.user_type.value == "व्यवसायी" %}selected{% endif %}>व्यवसायी</option>
                                    <option value="उद्योगपति" {% if form.user_type.value == "उद्योगपति" %}selected{% endif %}>उद्योगपति</option>
                                    <option value="प्रोफेशनल" {% if form.user_type.value == "प्रोफेशनल" %}selected{% endif %}>प्रोफेशनल</option>
                                    <option value="सेवा-निवृत्त" {% if form.user_type.value == "सेवा-निवृत्त" %}selected{% endif %}>सेवा-निवृत्त</option>
                                    <option value="गृहिणी" {% if form.user_type.value == "गृहिणी" %}selected{% endif %}>गृहिणी</option>
                                    <option value="श्रमिक" {% if form.user_type.value == "श्रमिक" %}selected{% endif %}>श्रमिक</option>
                                    <option value="कृषक (किसान)" {% if form.user_type.value == "कृषक (किसान)" %}selected{% endif %}>कृषक (किसान)</option>
                                    <option value="अन्य" {% if form.user_type.value == "अन्य" %}selected{% endif %}>अन्य</option>
                            </select>
                            <small id="professionError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter profession.</small>
                        </div>

                        <!-- student type -->
                        <div class="col-md-6 mb-3" id="studentType-container" style="display: none;">
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">स्कूल विद्यार्थी<i><small class="text-secondary ">(School Student) </small></i><span class="text-danger"> *</span></label>
                            <select name="student_type" id="studentType" class="form-control" style="font-size: 16px !important;">
                               <option value="" {% if not form.student_type.value %}selected{% endif %} selected disabled>कक्षा चुनें</option>
                               <option value="अन्य" {% if form.student_type.value == "अन्य" %}selected{% endif %}>अन्य</option>
                               <option value="कक्षा 5 व उससे नीचे" {% if form.user_type.value == "कक्षा 5 व उससे नीचे" %}selected{% endif %}>कक्षा 5 व उससे नीचे</option>
                               <option value="कक्षा 6" {% if form.user_type.value == "कक्षा 6" %}selected{% endif %}>कक्षा 6</option>
                               <option value="कक्षा 7" {% if form.user_type.value == "कक्षा 7" %}selected{% endif %}>कक्षा 7</option>
                               <option value="कक्षा 8" {% if form.user_type.value == "कक्षा 8" %}selected{% endif %}>कक्षा 8</option>
                               <option value="कक्षा 9" {% if form.user_type.value == "कक्षा 9" %}selected{% endif %}>कक्षा 9</option>
                               <option value="कक्षा 10" {% if form.user_type.value == "कक्षा 10" %}selected{% endif %}>कक्षा 10</option>
                               <option value="कक्षा 11" {% if form.user_type.value == "कक्षा 11" %}selected{% endif %}>कक्षा 11</option>
                               <option value="कक्षा 12" {% if form.user_type.value == "कक्षा 12" %}selected{% endif %}>कक्षा 12</option>
                            </select>
                            <small id="studentTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                        </div>

                        <!-- University Dropdown --> 
                        <div class="col-md-6 mb-3" id="university-container" style="display: {% if form.affilated_by.value and form.affilated_by.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="university" class="form-label" style="font-size: 16px; font-weight: 700; color: #333;">विश्वविद्यालय <i><small class="text-secondary ">(University) </small></i><span class="text-danger">*</span></label>
                            <select class="form-control" id="university" name="affilated_by">
                                <option value="" selected disabled>विश्वविद्यालय</option>
                            </select>
                            <small id="universityError" class="text-danger" style="display: none; font-size: 12px;">Please select an option.</small>
                        </div>

                         <!-- Institute Name -->
                        <div class="col-md-6 mb-3" id="institute-container" style="display: {% if form.institute_name.value and form.institute_name.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="institute" class="form-label" style="font-size: 16px; font-weight: 700; color: #333;">संस्थान <i><small class="text-secondary ">(Institute) </small></i><span class="text-danger"> *</span></label>
                            <select class="form-control" id="institute" name="institute_name">
                                <option value="" selected disabled>संस्थान</option>
                            </select>
                            <small id="instituteError" class="text-danger" style="display: none; font-size: 12px;">कृपया संस्थान का नाम दर्ज करें</small>
                        </div>

                        <!-- Course Dropdown -->
                        <div class="col-md-6 mb-3" id="course-container" style="display: {% if form.category_name.value and form.category_name.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="course" class="form-label" style="font-size: 16px; font-weight: 700; color: #333;">विषय <i><small class="text-secondary ">(Course) </small></i> <span class="text-danger">*</span></label>
                            <select class="form-control" id="course" name="category_name">
                                <option value="" selected disabled>विषय</option>
                            </select>
                            <small id="courseError" class="text-danger" style="display: none; font-size: 12px;">कृपया विषय चुनें</small>
                        </div>

                        <!-- कॉलेज विद्यार्थी का प्रकार -->
                        <div class="col-md-6 mb-3" id="collegeStudentType-container" style="display: {% if form.college_student_type.value and form.college_student_type.value != 'None' %}block{% else %}none{% endif %};"> 
                            <label for="collegeStudentType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">कॉलेज विद्यार्थी / प्राध्यापक<i><small class="text-secondary ">(University Student / Professor) </small></i><span class="text-danger"> *</span></label>
                            <select id="collegeStudentType" name="college_student_type" class="form-control" >
                                <option value="" {% if not form.college_student_type.value %}selected{% endif %}disabled selected>विकल्प चुनें</option>
                                <option value="अन्य" {% if form.college_student_type.value == "अन्य" %}selected{% endif %}>अन्य</option>
                                <option value="स्नातक (UG)" {% if form.college_student_type.value == "स्नातक (UG)" %}selected{% endif %}>स्नातक (UG)</option>
                                <option value="परा-स्नातक (PG)" {% if form.college_student_type.value == "परा-स्नातक (PG)" %}selected{% endif %}>परा-स्नातक (PG)</option>
                                <option value="शोध" {% if form.college_student_type.value == "शोध" %}selected{% endif %}>शोध</option>
                                <option value="PHD" {% if form.college_student_type.value == "PHD" %}selected{% endif %}>PHD</option>
                            </select>
                            <small id="collegeStudentTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>                 

                        <!-- सामाजिक संस्थान में कार्यरत - कार्य का क्षेत्र -->
                        <div class="col-md-6 mb-3" id="socialWorkArea-container" style="display: {% if form.social_work_area.value and form.social_work_area.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="socialWorkArea" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">कार्य क्षेत्र<i><small class="text-secondary text-italic">(Area of Work) </small></i><span class="text-danger"> *</span></label>
                            <select id="socialWorkArea" name="social_work_area" class="form-control">
                                <option value="" {% if not form.social_work_area.value %}selected{% endif %} disabled selected>विकल्प चुनें</option>
                                <option value="अन्य" {% if form.social_work_area.value == "अन्य" %}selected{% endif %}>अन्य</option>
                                <option value="पर्यावरण" {% if form.social_work_area.value == "पर्यावरण" %}selected{% endif %}>पर्यावरण</option>
                                <option value="शैक्षिक" {% if form.social_work_area.value == "शैक्षिक" %}selected{% endif %}>शैक्षिक</option>
                                <option value="स्वास्थ्य" {% if form.social_work_area.value == "स्वास्थ्य" %}selected{% endif %}>स्वास्थ्य</option>
                                <option value="महिला सशक्तिकरण" {% if form.social_work_area.value == "महिला सशक्तिकरण" %}selected{% endif %}>महिला सशक्तिकरण</option>
                                <option value="बाल कल्याण" {% if form.social_work_area.value == "बाल कल्याण" %}selected{% endif %}>बाल कल्याण</option>
                                <option value="ग्रामीण विकास" {% if form.social_work_area.value == "ग्रामीण विकास" %}selected{% endif %}>ग्रामीण विकास</option>
                                <option value="मानवाधिकार" {% if form.social_work_area.value == "मानवाधिकार" %}selected{% endif %}>मानवाधिकार</option>
                                <option value="कानूनी" {% if form.social_work_area.value == "कानूनी" %}selected{% endif %}>कानूनी</option>
                                <option value="अनुसंधान" {% if form.social_work_area.value == "अनुसंधान" %}selected{% endif %}>अनुसंधान</option>
                                <option value="सेवा" {% if form.social_work_area.value == "सेवा" %}selected{% endif %}>सेवा</option>
                                <option value="धर्मार्थ" {% if form.social_work_area.value == "धर्मार्थ" %}selected{% endif %}>धर्मार्थ</option>
                            </select>
                            <small id="socialWorkAreaError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>

                        <!-- अध्यापक का प्रकार -->
                        <div class="col-md-6 mb-3" id="teacherType-container" style="display: {% if form.teacher_type.value and form.teacher_type.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="teacherType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">अध्यापक <i><small class="text-secondary ">(Teacher) </small></i><span class="text-danger"> *</span></label>
                            <select id="teacherType" name="teacher_type" class="form-control" >
                                <option value="" {% if not form.teacher_type.value %}selected{% endif %} disabled selected>विकल्प चुनें</option>
                                <option value="अन्य" {% if form.teacher_type.value == "अन्य" %}selected{% endif %}>अन्य</option>
                                <option value="प्राइमरी" {% if form.teacher_type.value == "प्राइमरी" %}selected{% endif %}>प्राइमरी</option>
                                <option value="TGT" {% if form.teacher_type.value == "TGT" %}selected{% endif %}>TGT</option>
                                <option value="PGT" {% if form.teacher_type.value == "PGT" %}selected{% endif %}>PGT</option>
                            </select>
                            <small id="teacherTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>
                 

                        <!-- Professional Type -->
                        <div class="col-md-6 mb-3" id="professionType-container" style="display: {% if form.profession_type.value and form.profession_type.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="professionType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">प्रोफेशनल <i><small class="text-secondary ">(Professional) </small></i><span class="text-danger"> *</span></label>
                            <select id="professionType" name="profession_type" class="form-control" >
                                <option value=""{% if not form.profession_type.value %}selected{% endif %} disabled selected>विकल्प चुनें</option>
                                <option value="Others" {% if form.profession_type.value == "Others" %}selected{% endif %}>Others</option>
                                <option value="Medical Professionals" {% if form.profession_type.value == "Medical Professionals" %}selected{% endif %}>Medical Professionals</option>
                                <option value="Engineering Professionals" {% if form.profession_type.value == "Engineering Professionals" %}selected{% endif %}>Engineering Professionals</option>
                                <option value="Legal Professionals" {% if form.profession_type.value == "Legal Professionals" %}selected{% endif %}>Legal Professionals</option>
                                <option value="Finance Professionals" {% if form.profession_type.value == "Finance Professionals" %}selected{% endif %}>Finance Professionals</option>
                                <option value="Education Professionals" {% if form.profession_type.value == "Education Professionals" %}selected{% endif %}>Education Professionals</option>
                                <option value="IT Professionals" {% if form.profession_type.value == "IT Professionals" %}selected{% endif %}>IT Professionals</option>
                                <option value="Design Professionals" {% if form.profession_type.value == "Design Professionals" %}selected{% endif %}>Design Professionals</option>
                                <option value="Media & Communication" {% if form.profession_type.value == "Media & Communication" %}selected{% endif %}>Media & Communication</option>
                                <option value="Art & Culture" {% if form.profession_type.value == "Art & Culture" %}selected{% endif %}>Art & Culture</option>
                                <option value="Management Professionals" {% if form.profession_type.value == "Management Professionals" %}selected{% endif %}>Management Professionals</option>
                            </select>
                            <small id="professionTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>

                        <!-- Professional SubType -->
                        <div class="col-md-6 mb-3" id="professionSubType-container" style="display: {% if form.profession_subtype.value and form.profession_subtype.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="professionSubType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">प्रोफेशनल प्रकार <i><small class="text-secondary ">(Professional Type) </small></i><span class="text-danger"> *</span></label>
                            <select id="professionSubType" name="profession_subtype" class="form-control" >
                                <option value="" disabled selected>विकल्प चुनें</option>
                            </select>
                            <small id="professionSubTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>

                        <!-- Industrialists -->
                        <div class="col-md-6 mb-3" id="industrialistType-container" style="display: {% if form.industrialist_type.value and form.industrialist_type.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="industrialistType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">उद्योगपति <i><small class="text-secondary ">(Industrialist) </small></i><span class="text-danger"> *</span></label>
                            <select id="industrialistType" name="industrialist_type" class="form-control" >
                                <option value="" {% if not form.industrialist_type.value %}selected{% endif %} disabled >विकल्प चुनें</option>
                                <option value="Others" {% if form.industrialist_type.value == "Others" %}selected{% endif %}>Others</option>
                                <option value="Textile Industrialists" {% if form.industrialist_type.value == "Textile Industrialists" %}selected{% endif %}>Textile Industrialists</option>
                                <option value="Steel and Iron Industrialists" {% if form.industrialist_type.value == "Steel and Iron Industrialists" %}selected{% endif %}>Steel and Iron Industrialists</option>
                                <option value="Chemical Industry" {% if form.industrialist_type.value == "Chemical Industry" %}selected{% endif %}>Chemical Industry</option>
                                <option value="Pharmaceutical Industrialists" {% if form.industrialist_type.value == "Pharmaceutical Industrialists" %}selected{% endif %}>Pharmaceutical Industrialists</option>
                                <option value="Automobile Industrialists" {% if form.industrialist_type.value == "Automobile Industrialists" %}selected{% endif %}>Automobile Industrialists</option>
                                <option value="Cement and Construction Material Industrialists" {% if form.industrialist_type.value == "Cement and Construction Material Industrialists" %}selected{% endif %}>Cement and Construction Material Industrialists</option>
                                <option value="FMCG Industrialists (Fast-Moving Consumer Goods)" {% if form.industrialist_type.value == "FMCG Industrialists (Fast-Moving Consumer Goods)" %}selected{% endif %}>FMCG Industrialists (Fast-Moving Consumer Goods)</option>
                                <option value="Petrochemical Industrialists" {% if form.industrialist_type.value == "Petrochemical Industrialists" %}selected{% endif %}>Petrochemical Industrialists</option>
                                <option value="IT and Software Industrialists" {% if form.industrialist_type.value == "IT and Software Industrialists" %}selected{% endif %}>IT and Software Industrialists</option>
                                <option value="Renewable Energy Industrialists" {% if form.industrialist_type.value == "Renewable Energy Industrialists" %}selected{% endif %}>Renewable Energy Industrialists</option>
                                <option value="Aerospace and Defense Industrialists" {% if form.industrialist_type.value == "Aerospace and Defense Industrialists" %}selected{% endif %}>Aerospace and Defense Industrialists</option>
                                <option value="Agro-based Industrialists (Fertilizers, Agro-equipment, Processing)" {% if form.industrialist_type.value == "Agro-based Industrialists (Fertilizers, Agro-equipment, Processing)" %}selected{% endif %}>Agro-based Industrialists (Fertilizers, Agro-equipment, Processing)</option>
                            </select>
                            <small id="industrialistTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>

                        <!-- Bussinessmens -->
                        <div class="col-md-6 mb-3" id="businessType-container" style="display: {% if form.business_type.value and form.business_type.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="businessType" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">व्यवसायी <i><small class="text-secondary ">(Businessman) </small></i><span class="text-danger"> *</span></label>
                            <select id="businessType" name="business_type" class="form-control" >
                                <option value=""  {% if not form.business_type.value %}selected{% endif %} disabled>विकल्प चुनें</option>
                                <option value="Others" {% if form.business_type.value == "Others" %}selected{% endif %}>Others</option>
                                <option value="Manufacturing (factories, plants)" {% if form.business_type.value == "Manufacturing (factories, plants)" %}selected{% endif %}>Manufacturing (factories, plants)</option>
                                <option value="Service (consultancy, education, healthcare)" {% if form.business_type.value == "Service (consultancy, education, healthcare)" %}selected{% endif %}>Service (consultancy, education, healthcare)</option>
                                <option value="Trading (import/export, wholesale, retail)" {% if form.business_type.value == "Trading (import/export, wholesale, retail)" %}selected{% endif %}>Trading (import/export, wholesale, retail)</option>
                                <option value="Agriculture & Allied (farming, fisheries, dairy)" {% if form.business_type.value == "Agriculture & Allied (farming, fisheries, dairy)" %}selected{% endif %}>Agriculture & Allied (farming, fisheries, dairy)</option>
                                <option value="Technology & IT (software services, app development)" {% if form.business_type.value == "Technology & IT (software services, app development)" %}selected{% endif %}>Technology & IT (software services, app development)</option>
                                <option value="Financial Services (banks, NBFCs, insurance firms)" {% if form.business_type.value == "Financial Services (banks, NBFCs, insurance firms)" %}selected{% endif %}>Financial Services (banks, NBFCs, insurance firms)</option>
                                <option value="E-commerce (online retail, platforms)" {% if form.business_type.value == "E-commerce (online retail, platforms)" %}selected{% endif %}>E-commerce (online retail, platforms)</option>
                                <option value="Real Estate & Construction" {% if form.business_type.value == "Real Estate & Construction" %}selected{% endif %}>Real Estate & Construction</option>
                                <option value="Tourism & Hospitality (hotels, travel agencies)" {% if form.business_type.value == "Tourism & Hospitality (hotels, travel agencies)" %}selected{% endif %}>Tourism & Hospitality (hotels, travel agencies)</option>
                                <option value="Entertainment & Media (film, music, OTT)" {% if form.business_type.value == "Entertainment & Media (film, music, OTT)" %}selected{% endif %}>Entertainment & Media (film, music, OTT)</option>
                            </select>
                            <small id="businessTypeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>


                        <!-- लैंगिक जानकारी (gender) -->
                        <div class="col-md-6 mb-3" id="gender-container">
                            <label class="form-label " style="font-size: 16px !important; font-weight: 700; color: #333;">लैंगिक जानकारी <i><small class="text-secondary ">(Gender) </small></i><span class="text-danger"> *</span></label>
                            <div class="d-flex align-items-center">
                                <div class="form-check me-3">
                                    <input type="radio" id="male" name="gender" value="Male" class="form-check-input"{% if form.gender.value == 'Male' %}checked{% endif %} checked>
                                    <label for="male" class="form-check-label" style="font-size: 16px; font-weight: 400; color: #333;">पुरुष</label>
                                </div>

                                <div class="form-check me-3">
                                    <input type="radio" id="female" name="gender" value="Female" class="form-check-input" {% if form.gender.value == 'Female' %}checked{% endif %}>
                                    <label for="female" class="form-check-label" style="font-size: 16px; font-weight: 400; color: #333;">महिला</label>
                                </div>

                                <div class="form-check">
                                    <input type="radio" id="otherGender" name="gender" value="other" class="form-check-input" {% if form.gender.value == 'other' %}checked{% endif %}>
                                    <label for="otherGender" class="form-check-label" style="font-size: 16px; font-weight: 400; color: #333;">अन्य</label>
                                </div>
                            </div>
                            <small id="genderError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter gender.</small>
                        </div>

                        <!-- वर्तमान पता (Current Address) -->
                        <div class="col-12 mb-3" id="currentAddress-container">
                            <label for="currentAddress" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">वर्तमान पता <i><small class="text-secondary ">(Current Address) </small></i> <span class="text-danger">*</span></label>
                            <textarea name="corress_address" id="currentAddress" class="form-control" maxlength="255" placeholder="example: House No. 12, Gandhi Nagar, Main Road, Mumbai - 400001" rows="3" autofocus>{{ form.corress_address.value|default_if_none:'' }}</textarea>
                            <small id="currentAddressError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter current address.</small>
                        </div>

                        <!-- स्थायी और वर्तमान पता समान है -->
                        <div class="col-12 mb-3">
                            <input type="checkbox" id="sameAddress" class="form-check-input"{% if form.corress_address.value == form.perman_address.value %}checked{% endif %}>
                            <label for="sameAddress" style="font-size: 16px; font-weight: 700;"> वर्तमान और स्थायी पता समान है?</label>
                        </div>

                        <!-- स्थायी पता (Permanent Address) -->
                        <div class="col-12 mb-3" id="permanentAddress-container">
                            <label for="permanentAddress" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">स्थायी पता <i><small class="text-secondary ">(Permanent Address) </small></i> <span class="text-danger">*</span></label>
                            <textarea name="perman_address" id="permanentAddress" class="form-control" maxlength="255"placeholder="example: House No. 12, Gandhi Nagar, Main Road, Mumbai - 400001" rows="3">{{ form.perman_address.value|default_if_none:'' }}</textarea>
                            <small id="permanentAddressError" class="text-danger"style="display: none;font-size: 12px !important;">Please enter permanent address.</small>
                        </div>

                        <!-- Address Pincode -->
                        <div class="col-md-6 mb-3 dropdown" id="address_pincode-container">
                            <label for="address_pincode" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">पिनकोड <i><small class="text-secondary ">(वर्तमान निवास का) </small></i> <span class="text-danger">*</span></label>
                            <input type="number" id="address_pincode" class="form-control" placeholder="exapmle: 121107, 110001" min="0" max="999999" name="address_pincode"value="{{ form.address_pincode.value|default_if_none:'' }}" autofocus>
                            <small id="address_pincodeError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter a valid 6-digit pincode.</small>
                        </div>

                        <!-- निवास का नगर (nagar_address){{mappings}} -->            
                        <div class="col-md-6  dropdown" id="address_nagar-container" style="display: {% if form.nagar_address.value and form.nagar_address.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="address_nagar" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">निवास का नगर <i><small class="text-secondary ">(Nagar) </small></i><span class="text-danger"> *</span></label>
                            <select id="address_nagar" name="nagar_address" class="form-control" autofocus>
                                <option value="" disabled selected>निवास का नगर</option>
                            </select>
                            <small id="address_nagarError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter nagar.</small>                  
                        </div>
                    
                        <!-- राज्य (address_state) -->
                        <div class="col-md-6  dropdown" id="address_state-container" style="display: {% if form.address_state.value and form.address_state.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="address_state" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">राज्य <i><small class="text-secondary ">(State) </small></i><span class="text-danger"> *</span></label>
                            <select id="address_state" name="address_state" class="form-control" autofocus>
                                <option value="" disabled selected>राज्य</option>
                            </select>
                            <small id="address_stateError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter state.</small>
                        </div>

                    </div> 

                    <div class="d-flex flex-column flex-md-row justify-content-end align-items-center gap-3 py-3">
                        <!-- Next Button -->
                        <a href=""class="btn next-btn btn-outline-danger fw-bold btn-lg px-4 py-2 rounded-pill shadow-sm" style="transition: all 0.3s ease;">
                        <i class="fas fa-arrow-right me-2"></i> Next
                        </a>
                    </div>
                    
                    <div id="card_body_1Error" class="alert alert-danger mb-3" style="display: none; font-size: 14px;margin: 10px;">Please complete all required fields in this section
                    </div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header disabled "data-toggle-target="card_body_2" id="sangh_part1_tab"><span>संघ संबंधी जानकारी भाग - 1</span>
                    <span class="toggle-icon">
                        <i class="fas fa-plus"></i>
                    </span>
                </div>
                <div class="card-body" id="card_body_2">
                    <div class="row">

                        <!-- आप संघ(RSS) से किस प्रकार जुड़े हुए हैं ..? -->
                        <div class="col-md-12 mb-3" id="rssAssociation-container">
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">आप संघ(RSS) से किस माध्यम से जुड़े हुए हैं ..?<span class="text-danger"> *</span></label>
                            <div class="form-check">
                                <input type="radio" id="rssShakha" name="rss_association" class="form-check-input" value="शाखा" {% if form.rss_association.value == 'शाखा' %}checked{% endif %} >
                                <label for="rssShakha" class="form-check-label" style="font-size: 16px !important;">शाखा</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="rssMilan" name="rss_association" class="form-check-input" value="मिलन" {% if form.rss_association.value == 'मिलन' %}checked{% endif %} >
                                <label for="rssMilan" class="form-check-label" style="font-size: 16px !important;">मिलन</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="rssGatividhi" name="rss_association" class="form-check-input" value="गतिविधि" {% if form.rss_association.value == 'गतिविधि' %}checked{% endif %} >
                                <label for="rssGatividhi" class="form-check-label" style="font-size: 16px !important;">गतिविधि</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="rssVividhSangathan" name="rss_association" class="form-check-input" value="विविध संगठन" {% if form.rss_association.value == 'विविध संगठन' %}checked{% endif %} >
                                <label for="rssVividhSangathan" class="form-check-label" style="font-size: 16px !important;">विविध संगठन</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="rssJoin" name="rss_association" class="form-check-input" value="Join RSS / जुड़ना चाहते हैं" {% if form.rss_association.value == 'Join RSS / जुड़ना चाहते हैं' %}checked{% endif %} >
                                <label for="rssJoin" class="form-check-label" style="font-size: 16px !important;">Join RSS / जुड़ना चाहते हैं</label>
                            </div>
                            <small id="rssAssociationError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>
                        <!-- शाखा / मिलन 2 -->
                        <div class="col-md-6 dropdown mb-3" id="sakha_milan2-container" style="display: {% if form.ekai_sakha_milan.value and form.ekai_sakha_milan.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="sakha_milan2" class="form-label "style="font-size: 16px !important;font-weight: 700; color: #333;">शाखा / मिलन की श्रेणी<span class="text-danger"> *</span></label>
                            <select id="sakha_milan2" name='ekai_sakha_milan' class="form-control">
                                <option value="" disabled selected>शाखा / मिलन</option> 
                            </select>
                            <small id="sakha_milan2Error" class="text-danger" style="display: none;font-size: 12px !important;">Please enter sakha/milan.</small>
                        </div>

                        <div class="col-md-6 mb-3" id="activity-container" style="display: {% if form.activity.value and form.activity.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="activity" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">गतिविधि <i><small class="text-secondary ">(Activity) </small></i><span class="text-danger"> *</span></label>
                            <select id="activity" name="activity" class="form-select">
                                <option value=""  {% if not form.activity.value %}selected{% endif %} disabled>गतिविधि</option>
                                <option value="सामाजिक समरसता" {% if form.activity.value == "सामाजिक समरसता" %}selected{% endif %}>सामाजिक समरसता</option>
                                <option value="परिवार प्रबोधन" {% if form.activity.value == "परिवार प्रबोधन" %}selected{% endif %}>परिवार प्रबोधन</option>
                                <option value="पर्यावरण" {% if form.activity.value == "पर्यावरण" %}selected{% endif %}>पर्यावरण</option>
                                <option value="गौसेवा" {% if form.activity.value == "गौसेवा" %}selected{% endif %}>गौसेवा</option>
                                <option value="धर्म जागरण" {% if form.activity.value == "धर्म जागरण" %}selected{% endif %}>धर्म जागरण</option>
                                <option value="ग्राम विकास" {% if form.activity.value == "ग्राम विकास" %}selected{% endif %}>ग्राम विकास</option>
                            </select>
                            <small id="activityError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>  
                        
                        <!-- Vividh Sangathan Dropdown -->
                        <div class="col-md-6 mb-3" id="vividhSangathan-container" style="display: {% if form.vividhsangathan.value and form.vividhsangathan.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="vividhSangathan" class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">विविध संगठन <i><small class="text-secondary ">(Vividh Sangathan) </small></i><span class="text-danger"> *</span></label>   
                            <select id="vividhSangathan" name="vividhsangathan" class="form-select">
                                <option value="" selected disabled>विविध संगठन </option>
                            </select>
                            <small id="vividhSangathanError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter vividh sangathan.</small>
                        </div>

                        <div class="col-md-12 mb-3" id="socialInterests-container" style="display: none;">
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">
                            समाज जीवन में किस प्रकार के क्षेत्र में आपकी रुचि है..? <span class="text-danger">*</span>
                            </label>
                            <div class="row ms-2">
                            <div class="col-md-3 form-check" id="shiksha-container">
                                <input type="checkbox" id="shiksha" name="shiksha" value="शिक्षा" class="form-check-input">
                                <label for="shiksha" class="form-check-label" style="font-size: 16px !important;">शिक्षा</label>
                            </div>
                            <div class="col-md-3 form-check" id="aarthik-container">
                                <input type="checkbox" id="aarthik" name="aarthik" value="आर्थिक"class="form-check-input">
                                <label for="aarthik" class="form-check-label" style="font-size: 16px !important;">आर्थिक</label>
                            </div>
                            <div class="col-md-3 form-check" id="dharmik-container">
                                <input type="checkbox"id="dharmik" name="dharmik" value="धार्मिक" class="form-check-input">
                                <label for="dharmik" class="form-check-label" style="font-size: 16px !important;">धार्मिक</label>
                            </div>
                            <div class="col-md-3 form-check" id="seva-container">
                                <input type="checkbox" id="seva" name="seva" value="सेवा" class="form-check-input">
                                <label for="seva" class="form-check-label" style="font-size: 16px !important;">सेवा</label>
                            </div>
                            <div class="col-md-3 form-check" id="swasthya-container">
                                <input type="checkbox" id="swasthya" name="swasthya" value="स्वास्थ्य" class="form-check-input" >
                                <label for="swasthya" class="form-check-label" style="font-size: 16px !important;">स्वास्थ्य</label>
                            </div>
                            <div class="col-md-3 form-check" id="samajik-container">
                                <input type="checkbox" id="samajik" name="samajik" value="सामाजिक" class="form-check-input">
                                <label for="samajik" class="form-check-label" style="font-size: 16px !important;">सामाजिक</label>
                            </div>
                            <div class="col-md-3 form-check" id="sanskritik-container">
                                <input type="checkbox" id="sanskritik" name="sanskritik" value="सांस्कृतिक" class="form-check-input">
                                <label for="sanskritik" class="form-check-label" style="font-size: 16px !important;">सांस्कृतिक</label>
                            </div>
                            <div class="col-md-3 form-check" id="vaicharik-container">
                                <input type="checkbox" id="vaicharik" name="vaicharik" value="वैचारिक" class="form-check-input">
                                <label for="vaicharik" class="form-check-label" style="font-size: 16px !important;">वैचारिक</label>
                            </div>
                            <div class="col-md-3 form-check" id="suraksha-container">
                                <input type="checkbox" id="suraksha" name="suraksha" value="सुरक्षा" class="form-check-input">
                                <label for="suraksha" class="form-check-label" style="font-size: 16px !important;">सुरक्षा</label>
                            </div>
                            <div class="col-md-3 form-check" id="media-container">
                                <input type="checkbox" id="media" name="media" value="मीडिया" class="form-check-input">
                                <label for="media" class="form-check-label" style="font-size: 16px !important;">मीडिया</label>
                            </div>
                            </div>
                                            
                            <small id="socialInterestsError" class="text-danger" style="display: none; font-size: 12px !important;">
                            Please select an option.
                            </small>
                        </div>

                        <!-- आपके पास किसी प्रकार का दायित्व है..? -->
                        <div class="col-md-12 mb-3" id="responsibility-container" style="display: none;">
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">आपके पास किसी प्रकार का दायित्व है..?<span class="text-danger"> *</span></label>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="responsibilityYes" name="responsibility_yes_no" class="form-check-input" value="हाँ">
                                <label for="responsibilityYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="responsibilityNo" name="responsibility_yes_no" class="form-check-input" value="नहीं">
                                <label for="responsibilityNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                            </div>
                            <small id="responsibilityError" class="text-danger" style="display: none; font-size: 12px !important;">Please select a option.</small>
                        </div>

                        <!-- पिनकोड (जिस प्रांत में आपका दायित्व है।) (pincode) -->
                        <div class="col-md-6 mb-3 dropdown" id="pincode-container" >
                            <label for="pincode" class="form-label" style="font-size: 16px !important;font-weight: 700; color: #333;">पिनकोड <i><small class="text-secondary ">(जिस प्रांत में आपका दायित्व है।) </small></i> <span class="text-danger">*</span></label>
                            <input type="number" id="pincode" class="form-control" placeholder="exapmle: 121107, 110001" min="0" max="999999" name="pincode" value="{{ form.pincode.value|default_if_none:'' }}">
                            <small id="pincodeError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter a valid 6-digit pincode.</small>
                        </div>

                        <!-- Nagar Selection -->
                        <div class="col-md-6 mb-3 dropdown" id="nagar-container" style="display: {% if form.nagar.value and form.nagar.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="nagar" class="form-label" style="font-size: 16px !important;font-weight: 700;color: #333;">नगर <i><small class="text-secondary ">(Nagar) </small></i><span class="text-danger"> *</span></label>
                            <select id="nagar" name="nagar" class="form-control">
                                <option value="" disabled selected>नगर</option>
                            </select>
                            <small id="nagarError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter nagar.</small>
                        </div>


                        <!-- राज्य State Selection -->
                        <div class="col-md-6 mb-3 dropdown" id="state-container" style="display: {% if form.state.value and form.state.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="state" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">राज्य <i><small class="text-secondary ">(State) </small></i><span class="text-danger"> *</span></label>
                            <select id="state" name="state" class="form-control">
                                <option value="" disabled selected>राज्य</option>
                            </select>
                            <small id="stateError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter state.</small>
                        </div>

                        <!-- रेजिडेंशियल कॉलोनी (ब्लॉक/गली) (ekai_upbasti) -->
                        <div class="col-md-6 mb-3 dropdown" id="upbasti-container" style="display: {% if form.ekai_upbasti.value and form.ekai_upbasti.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="upbasti" class="form-label " style="font-size: 16px !important;font-weight: 700;color: #333;">रेजिडेंशियल कॉलोनी <i><small class="text-secondary ">(ब्लॉक/गली) </small></i> <span class="text-danger">*</span></label>
                            <select id="upbasti" name='ekai_upbasti' class="form-control">
                                <option value="" disabled selected>उपबस्ती</option>
                            </select>
                            <small id="upbastiError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter basti.</small>
                        </div>


                        <!-- दायित्व की इकाई (ekai) -->               
                        <div class="col-md-6 mb-3 dropdown " id="ekai-container" style="display: {% if form.ekai.value and form.ekai.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="ekai" class="form-label " style="font-size: 16px !important;font-weight: 700;color: #333;">दायित्व की इकाई <i><small class="text-secondary ">(Dayitva's Ekai) </small></i><span class="text-danger">*</span></label>
                            <select id="ekai" name='ekai' class="form-control">
                                <option value="" disabled selected>इकाई</option>
                            </select>
                            <small id="ekaiError"  class="text-danger" style="display: none;font-size: 12px !important;">Please enter ekai.</small>
                        </div>

                        <!-- Dayitva Selection  -->
                        <div class="col-md-6 mb-3 dropdown" id="dayitva-container" style="display: {% if form.dayitv.value and form.dayitv.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="dayitva" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व <i><small class="text-secondary ">(Dayitva) </small></i><span class="text-danger"> *</span></label>
                            <select id="dayitva" name="dayitv" class="form-control">
                                <option value="" disabled selected>दायित्व</option>
                            </select>
                            <small id="dayitvaError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter dayitva.</small>
                        </div>

                        <!-- दायित्व का प्रान्त (prant)-->
                        <div class="col-md-6 mb-3 dropdown" id="prant-container" style="display: {% if form.prant.value and form.prant.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="prant" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व का प्रान्त <i><small class="text-secondary ">(Dayitva's Prant) </small></i><span class="text-danger"> *</span></label>
                            <select id="prant" name='prant' class="form-control">
                                <option value="" disabled selected>प्रांत</option>
                            </select>
                            <small id="prantError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter prant.</small>
                        </div>

                        <!-- दायित्व का विभाग (vibhag)-->
                        <div class="col-md-6 mb-3 dropdown" id="vibhag-container" style="display: {% if form.vibhag.value and form.vibhag.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="vibhag" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व का विभाग <i><small class="text-secondary ">(Dayitva's Vibhag) </small></i><span class="text-danger"> *</span></label>
                            <select id="vibhag" class="form-control" name="vibhag">
                                <option value="" disabled selected>विभाग</option>
                            </select>
                            <small id="vibhagError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter vibhag.</small>
                        </div>

                        <!-- दायित्व का जिला (jila) -->
                        <div class="col-md-6 mb-3 dropdown" id="jila-container" style="display: {% if form.jila.value and form.jila.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="jila" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व का जिला <i><small class="text-secondary ">(Dayitva's Jila) </small></i><span class="text-danger"> *</span></label>
                            <select id="jila" class="form-control" name="jila">
                                <option value="" disabled selected>जिला</option>
                            </select>
                            <small id="jilaError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter jila.</small>
                        </div>

                        <!-- दायित्व का नगर (ekai_nagar) -->
                        <div class="col-md-6 mb-3 dropdown" id="ekai_nagar-container" style="display: {% if form.ekai_nagar.value and form.ekai_nagar.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="ekai_nagar" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व का नगर <i><small class="text-secondary ">(Dayitva's Nagar) </small></i><span class="text-danger"> *</span></label>
                            <select id="ekai_nagar" name='ekai_nagar' class="form-control">
                                <option value="" disabled selected>नगर</option>
                            </select>
                            <small id="ekai_nagarError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter nagar.</small>
                        </div>

                        <!-- दायित्व का मंडल (ekai_mandal) -->
                        <div class="col-md-6 mb-3 dropdown" id="mandal-container" style="display: {% if form.ekai_mandal.value and form.ekai_mandal.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="mandal" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">दायित्व का मंडल <i><small class="text-secondary ">(Dayitva's Mandal) </small></i><span class="text-danger"> *</span></label>
                            <select id="mandal" name='ekai_mandal' class="form-control">
                                <option value="" disabled selected>मंडल</option>
                            </select>
                            <small id="mandalError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter mandal.</small>
                        </div>

                        <!-- दायित्व की बस्ती (basti) -->
                        <div class="col-md-6 mb-3 dropdown" id="basti-container" style="display: {% if form.ekai_basti.value and form.ekai_basti.value != 'None' %}block{% else %}none{% endif %};">
                            <label for="basti" class="form-label " style="font-size: 16px !important;font-weight: 700;color: #333;">दायित्व की बस्ती <i><small class="text-secondary ">(Dayitva's Basti) </small></i><span class="text-danger"> *</span></label>
                            <select id="basti" name='ekai_basti' class="form-control">
                                <option value="" disabled selected>बस्ती</option>
                            </select>
                            <small id="bastiError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter basti.</small>
                        </div>

                        <!-- Radio Milan  -->
                        <div class="col-md-12 mb-3" id="sakha_milanCheckbox-container"style="display: {% if form.ekai_milaan.value %}block{% else %}none{% endif %};" >
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">क्या आप मिलन से जुड़े हैं?<span class="text-danger"> *</span></label>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="sakha_milanCheckboxYes" name="ekai_milaan" class="form-check-input" value="हाँ" >
                                <label for="sakha_milanCheckboxYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="sakha_milanCheckboxNo" name="ekai_milaan" class="form-check-input" value="नहीं">
                                <label for="sakha_milanCheckboxNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                            </div>              
                            <small id="sakha_milanCheckboxError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                        </div>

                        <!-- शाखा / मिलन -->
                        <div class="col-md-6 dropdown" id="sakha_milan-container" style="display: {% if form.ekai_sakha_milan.value or form.ekai.value %}block{% else %}none{% endif %};">
                            <label for="sakha_milan" class="form-label " style="font-size: 16px !important;font-weight: 700; color: #333;">शाखा / मिलन <i><small class="text-secondary ">(Shakha / Milan) </small></i><span class="text-danger"> *</span></label>
                            <select id="sakha_milan" name='ekai_sakha_milan' class="form-control">
                                <option value="" disabled selected>शाखा / मिलन</option>    
                            </select>
                            <small id="sakha_milanError" class="text-danger" style="display: none;font-size: 12px !important;">Please enter shakha/milan.</small>
                        </div>

                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-end align-items-center gap-3 py-3">
                        <!-- Next Button -->
                        <a href=""class="btn next-btn btn-outline-danger fw-bold btn-lg px-4 py-2 rounded-pill shadow-sm" style="transition: all 0.3s ease;"><i class="fas fa-arrow-right me-2"></i> Next</a>
                    </div>

                </div>
                <div id="card_body_2Error" class="alert alert-danger mb-3" style="display: none; font-size: 14px;margin: 10px;">Please complete all required fields in this section</div>
            </div>

            <div class="card mb-3">
                <div class="card-header disabled" data-toggle-target="card_body_3" id="sangh_part2_tab"><span>संघ संबंधी जानकारी भाग - 2</span>
                    <span class="toggle-icon">
                        <i class="fas fa-plus"></i>
                    </span>
                </div>
                <div class="card-body" id="card_body_3">

                    <div class="row ">
                        <h5 class="card-title text-center fw-bold " >संघ शिक्षण</h5>
                        <div class="col-md-6 mb-3 dropdown" id="sangh_shikshan_level-container">
                            <label for="sangh_shikshan_level" class="form-label" style="font-size: 16px !important;font-weight: 600; color: #333;">संघ शिक्षण <i><small class="text-secondary ">(Sangh Shikshan) </small></i><span class="text-danger"> *</span></label>
                            <select id="sangh_shikshan_level" name="ekai_sangh_shikshan_level" class="form-control">
                            <option value="" disabled selected>example: प्रथम वर्ष / कोई नहीं...</option>
                            <option value="कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष" {% if form.ekai_sangh_shikshan_level.value == 'कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष' %}selected{% endif %}>कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष</option>
                            <option value="कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष" {% if form.ekai_sangh_shikshan_level.value == 'कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष' %}selected{% endif %}>कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष</option>
                            <option value="संघ शिक्षा वर्ग / प्रथम वर्ष" {% if form.ekai_sangh_shikshan_level.value == 'संघ शिक्षा वर्ग / प्रथम वर्ष' %}selected{% endif %}>संघ शिक्षा वर्ग / प्रथम वर्ष</option>
                            <option value="प्राथमिक वर्ग" {% if form.ekai_sangh_shikshan_level.value == 'प्राथमिक वर्ग' %}selected{% endif %}>प्राथमिक वर्ग</option>
                            <option value="प्रारम्भिक वर्ग" {% if form.ekai_sangh_shikshan_level.value == 'प्रारम्भिक वर्ग' %}selected{% endif %}>प्रारम्भिक वर्ग</option>
                            <option value="कोई शिक्षण नहीं हुआ" {% if form.ekai_sangh_shikshan_level.value == 'कोई शिक्षण नहीं हुआ' %}selected{% endif %}>कोई शिक्षण नहीं हुआ</option>
                            </select>
                            <small id="sangh_shikshan_levelError" class="text-danger" style="display: none;font-size: 12px !important;">Please select sangh shikshan level</small>
                        </div>

                        <div id="shikshan-details-container" style="display: none;">
                            <!-- Fields will be dynamically inserted here -->
                        </div>

                        <!-- Radio Pratigya  -->
                        <div class="col-md-12 mb-3" id="pratigyaCheckbox-container"style="display: {% if form.ekai_sangh_shikshan_level.value == 'संघ शिक्षा वर्ग / प्रथम वर्ष' or form.ekai_sangh_shikshan_level.value == 'प्राथमिक वर्ग' or form.ekai_sangh_shikshan_level.value == 'प्रारम्भिक वर्ग' or form.ekai_sangh_shikshan_level.value == 'कोई शिक्षण नहीं हुआ' %}block{% else %}none{% endif %};" >
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">आपकी प्रतिज्ञा हुई है?<span class="text-danger"> *</span></label>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="pratigyaCheckboxYes" name="pratigya" class="form-check-input" value="हाँ" >
                                <label for="pratigyaCheckboxYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="pratigyaCheckboxNo" name="pratigya" class="form-check-input" value="नहीं">
                                <label for="pratigyaCheckboxNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                            </div>                   
                            <small id="pratigyaCheckboxError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                        </div>

                    </div>   

                    <div class="row ">
                        <h5 class="card-title text-center fw-bold ">घोष संबंधी जानकारी</h5>
                        <!-- घोष वादक है -->
                        <div class="col-md-12 mb-3" id="ghosh_vadak-container" >
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">क्या आप घोष वादक हैं?</label>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="ghoshVadakYes" name="ghosh_vadak" class="form-check-input" value="हाँ" >
                                <label for="ghoshVadakYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="ghoshVadakNo" name="ghosh_vadak" class="form-check-input" value="नहीं">
                                <label for="ghoshVadakNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                            </div>               
                            <small id="ghoshVadakError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                        </div>

                        <!-- यदि हाँ तो -->
                        <div id="ghoshVadakYes-container" style="display: none;">
                            <!-- वाद्य (चेक बॉक्स) -->
                            <div class="col-md-12 mb-3" id="vadya-container">
                                <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">वाद्य <i><small class="text-secondary ">(Musical Instrument)</small></i></label>
                                <div class="ms-2 ms-sm-1">
                                    <!-- Shankh -->
                                    <div class="form-check mb-2" id="shankh-container">
                                        <input type="checkbox" id="shankh" name="shankh" class="form-check-input" value="शंख">
                                        <label for="shankh" class="form-check-label" style="font-size: 16px !important;">शंख</label>
                                    </div>
                                
                                    <!-- Shrung with Sub-Options -->
                                    <div class="form-check mb-2" id="shrung-container">
                                        <input type="checkbox" id="shrung" name="shrung" class="form-check-input" value="श्रृंग">
                                        <label for="shrung" class="form-check-label" style="font-size: 16px !important;">श्रृंग</label>
                                        <!-- Sub-Options for Shrung (Horizontal with Responsive Wrapping) -->
                                        <div class="d-flex flex-row flex-wrap ms-4 ms-sm-3 mt-1">
                                            <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="turya-container">
                                                <input type="checkbox" id="turya" name="turya" class="form-check-input" value="तुर्य">
                                                <label for="turya" class="form-check-label" style="font-size: 14px !important;">तुर्य</label>
                                            </div>
                                            <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="swarad-container">
                                                <input type="checkbox" id="swarad" name="swarad" class="form-check-input" value="स्वरद">
                                                <label for="swarad" class="form-check-label" style="font-size: 14px !important;">स्वरद</label>
                                            </div>
                                            <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="nagang-container">
                                                <input type="checkbox" id="nagang" name="nagang" class="form-check-input" value="नागांग">
                                                <label for="nagang" class="form-check-label" style="font-size: 14px !important;">नागांग</label>
                                            </div>
                                            <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="gomukh-container">
                                                <input type="checkbox" id="gomukh" name="gomukh" class="form-check-input" value="गोमुख">
                                                <label for="gomukh" class="form-check-label" style="font-size: 14px !important;">गोमुख</label>
                                            </div>
                                            <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="other-container">
                                                <input type="checkbox" id="other" name="other" class="form-check-input" value="अन्य">
                                                <label for="other" class="form-check-label" style="font-size: 14px !important;">अन्य</label>
                                            </div>
                                        </div>
                                    </div>
                                
                                    <!-- Aanak -->
                                    <div class="form-check mb-2" id="aanak-container">
                                        <input type="checkbox" id="aanak" name="aanak" class="form-check-input" value="आनक">
                                        <label for="aanak" class="form-check-label" style="font-size: 16px !important;">आनक</label>
                                    </div>
                                
                                    <!-- Panav -->
                                    <div class="form-check mb-2" id="panav-container">
                                        <input type="checkbox" id="panav" name="panav" class="form-check-input" value="पणव">
                                        <label for="panav" class="form-check-label" style="font-size: 16px !important;">पणव</label>
                                    </div>
                                
                                    <!-- Jhallari -->
                                    <div class="form-check mb-2" id="jhallari-container">
                                        <input type="checkbox" id="jhallari" name="jhallari" class="form-check-input" value="झल्लरी">
                                        <label for="jhallari" class="form-check-label" style="font-size: 16px !important;">झल्लरी</label>
                                    </div>
                                
                                    <!-- Tribhuj -->
                                    <div class="form-check mb-2" id="tribhuj-container">
                                        <input type="checkbox" id="tribhuj" name="tribhuj" class="form-check-input" value="त्रिभुज">
                                        <label for="tribhuj" class="form-check-label" style="font-size: 16px !important;">त्रिभुज</label>
                                    </div>
                                </div>
                                <small id="vadyaError" class="text-danger" style="display: none; font-size: 12px !important;">Please select at least one instrument.</small>
                            </div>

                            <!-- शंख/श्रृंग वाद्य अपना है..? -->
                            <div class="col-md-12 mb-3" id="shankhShrungOwn-container" >
                            <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">शंख/श्रृंग वाद्य आपका अपना है?</label>
                            <div class="form-check form-check-inline">
                                <input type="radio" id="shankhShrungOwnYes" name="shankh_shrung_own" class="form-check-input" value="हाँ" >
                                    <label for="shankhShrungOwnYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input type="radio" id="shankhShrungOwnNo" name="shankh_shrung_own" class="form-check-input" value="नहीं">
                                    <label for="shankhShrungOwnNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                                </div>                      
                                <small id="shankhShrungOwnError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                            </div>


                            <!-- रचनाएं (रेडियो बटन) -->
                            <div class="col-md-12 mb-3" id="rachnaye-container">
                                <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">रचनाएं <i><small class="text-secondary ">(Rachnaye) </small></i></label>
                                <div class="form-check">
                                    <input type="radio" id="prathamikPath" name="rachnaye" class="form-check-input" value="प्राथमिक पाठ" >
                                    <label for="prathamikPath" class="form-check-label" style="font-size: 16px !important;">प्राथमिक पाठ</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="rachnaye1to3" name="rachnaye" class="form-check-input" value="1 से 3 रचनाएँ" >
                                    <label for="rachnaye1to3" class="form-check-label" style="font-size: 16px !important;">1 से 3 रचनाएँ</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="rachnaye3to5" name="rachnaye" class="form-check-input" value="3 से 5 रचनाएँ" >
                                    <label for="rachnaye3to5" class="form-check-label" style="font-size: 16px !important;">3 से 5 रचनाएँ</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="rachnaye5to10" name="rachnaye" class="form-check-input" value="5 से 10 रचनाएँ" >
                                    <label for="rachnaye5to10" class="form-check-label" style="font-size: 16px !important;">5 से 10 रचनाएँ</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="rachnayeMoreThan10" name="rachnaye" class="form-check-input" value="10 से अधिक" >
                                    <label for="rachnayeMoreThan10" class="form-check-label" style="font-size: 16px !important;">10 से अधिक</label>
                                </div>
                                <small id="rachnayeError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                            </div>

                        </div>
                        <!-- यदि नहीं तो -->
                        <div id="ghoshVadakNo-container" style="display: none;">
                            <!-- वाद्य सीखने के इच्छुक हैं..? -->
                            <div class="col-md-12 mb-3" id="learn_vadya">
                                <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">वाद्य सीखने के इच्छुक हैं..?</label>
                                <div class="form-check form-check-inline">
                                    <input type="radio" id="learnVadyaYes" name="learn_vadya" class="form-check-input" value="हाँ" >
                                    <label for="learnVadyaYes" class="form-check-label" style="font-size: 16px !important;">हाँ</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input type="radio" id="learnVadyaNo" name="learn_vadya" class="form-check-input" value="नहीं" >
                                    <label for="learnVadyaNo" class="form-check-label" style="font-size: 16px !important;">नहीं</label>
                                </div>
                                <small id="learnVadyaError" class="text-danger" style="display: none; font-size: 12px !important;">Please select an option.</small>
                            </div>

                            <div id="learnVadyaList-container" style="display:none;">
                                <!-- वाद्य (रेडियो बटन) -->
                                <div class="col-md-12 mb-3" id="learnVadyaList">
                                    <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">वाद्य <i><small class="text-secondary ">(Musical Instrument) </small></i></label>
                                    <div class="ms-2 ms-sm-1">
                                        <!-- Shankh -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnShankh" name="learn_vadya_list" class="form-check-input" value="शंख">
                                            <label for="learnShankh" class="form-check-label" style="font-size: 16px !important;">शंख</label>
                                        </div>
                                
                                        <!-- Shrung with Sub-Options -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnShrung" name="learn_vadya_list" class="form-check-input" value="श्रृंग">
                                            <label for="learnShrung" class="form-check-label" style="font-size: 16px !important;">श्रृंग</label>

                                            <div class="d-flex flex-row flex-wrap ms-4 ms-sm-3 mt-1">
                                                <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="learnTurya-container">
                                                    <input type="radio" id="learnTurya" name="learn_vadya_list" class="form-check-input" value="तुर्य">
                                                    <label for="learnTurya" class="form-check-label" style="font-size: 14px !important;">तुर्य</label>
                                                </div>
                                                <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="learnSwarad-container">
                                                    <input type="radio" id="learnSwarad" name="learn_vadya_list" class="form-check-input" value="स्वरद">
                                                    <label for="learnSwarad" class="form-check-label" style="font-size: 14px !important;">स्वरद</label>
                                                </div>
                                                <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="learnNagang-container">
                                                    <input type="radio" id="learnNagang" name="learn_vadya_list" class="form-check-input" value="नागांग">
                                                    <label for="learnNagang" class="form-check-label" style="font-size: 14px !important;">नागांग</label>
                                                </div>
                                                <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 me-md-3 me-lg-2 mb-2" id="learnGomukh-container">
                                                    <input type="radio" id="learnGomukh" name="learn_vadya_list" class="form-check-input" value="गोमुख">
                                                    <label for="learnGomukh" class="form-check-label" style="font-size: 14px !important;">गोमुख</label>
                                                </div>
                                                <div class="form-check hidden-checkbox col-6 col-md-3 col-lg-2 mb-2" id="learnOther-container">
                                                    <input type="radio" id="learnOther" name="learn_vadya_list" class="form-check-input" value="अन्य">
                                                    <label for="learnOther" class="form-check-label" style="font-size: 14px !important;">अन्य</label>
                                                </div>
                                            </div>
                                        </div>
                                
                                        <!-- Aanak -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnAanak" name="learn_vadya_list" class="form-check-input" value="आनक">
                                            <label for="learnAanak" class="form-check-label" style="font-size: 16px !important;">आनक</label>
                                        </div>
                                
                                        <!-- Panav -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnPanav" name="learn_vadya_list" class="form-check-input" value="पणव">
                                            <label for="learnPanav" class="form-check-label" style="font-size: 16px !important;">पणव</label>
                                        </div>
                                
                                        <!-- Jhallari -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnJhallari" name="learn_vadya_list" class="form-check-input" value="झल्लरी">
                                            <label for="learnJhallari" class="form-check-label" style="font-size: 16px !important;">झल्लरी</label>
                                        </div>
                                
                                        <!-- Tribhuj -->
                                        <div class="form-check mb-2">
                                            <input type="radio" id="learnTribhuj" name="learn_vadya_list" class="form-check-input" value="त्रिभुज">
                                            <label for="learnTribhuj" class="form-check-label" style="font-size: 16px !important;">त्रिभुज</label>
                                        </div>
                                    </div>
                                    <small id="learnVadyaListError" class="text-danger" style="display: none; font-size: 12px !important;">Please select at least one instrument.</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- गणवेश संबंधी जानकारी -->
                        <div id="ganvesh-container" >
                            <div class="col-md-12 mb-3" id="ganvesh-container">
                                <label class="form-label" style="font-size: 16px !important; font-weight: 700; color: #333;">गणवेश संबंधी जानकारी</label>
                                <div class="row ms-2">
                                    <div class="col-md-3 form-check" id="sanghPant-container">
                                        <input type="checkbox" id="sanghPant" name="sanghpant" class="form-check-input" value="गणवेश की पैंट" >
                                        <label for="sanghPant" class="form-check-label" style="font-size: 16px !important;">गणवेश की पैंट</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="safedKameez-container">
                                        <input type="checkbox" id="safedKameez" name="whiteshirt" class="form-check-input" value="सफेद कमीज" >
                                        <label for="safedKameez" class="form-check-label" style="font-size: 16px !important;">सफेद कमीज</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="sanghTopi-container">
                                        <input type="checkbox" id="sanghTopi" name="sanghtopi" class="form-check-input" value="गणवेश की टोपी">
                                        <label for="sanghTopi" class="form-check-label" style="font-size: 16px !important;">गणवेश की टोपी</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="sanghPeti-container">
                                        <input type="checkbox" id="sanghPeti" name="sanghpeti" class="form-check-input" value="संघ की पेटी">
                                        <label for="sanghPeti" class="form-check-label" style="font-size: 16px !important;">संघ की पेटी</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="jurab-container">
                                        <input type="checkbox" id="jurab" name="jurab" class="form-check-input" value="जुराब" >
                                        <label for="jurab" class="form-check-label" style="font-size: 16px !important;">जुराब</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="joote-container">
                                        <input type="checkbox" id="joote" name="joote" class="form-check-input" value="जूते" >
                                        <label for="joote" class="form-check-label" style="font-size: 16px !important;">जूते</label>
                                    </div>
                                    <div class="col-md-3 form-check" id="dand-container">
                                        <input type="checkbox" id="dand" name="dand" class="form-check-input" value="दंड" >
                                        <label for="dand" class="form-check-label" style="font-size: 16px !important;">दंड</label>
                                    </div>
                                </div>
                                <small id="ganveshError" class="text-danger" style="display: none; font-size: 12px !important;">Please select at least one uniform item.</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="card_body_3Error" class="alert alert-danger mb-3" style="display: none; font-size: 14px;margin: 10px;">
                    Please complete all required fields in this section
                </div>
            </div>

            <div class="d-flex flex-row flex-md-row justify-content-center align-items-center gap-3 mt-4 py-3">
                <!-- Submit Button -->
                <button type="submit" class="btn fw-bold btn-lg px-4 py-2 rounded-pill text-white shadow-sm border-0" style="background: linear-gradient(135deg, #FF9800, #FF9800);transition: all 0.3s ease;min-width: 120px;"><i class="fas fa-arrow-circle-right me-2"></i> Submit</button>          
                <!-- Back Button -->
                <a href="{% url 'register_samautkarsh:view_registration' %}" class="btn btn-outline-danger fw-bold btn-lg px-4 py-2 rounded-pill shadow-sm"style="transition: all 0.3s ease;min-width: 120px;"><i class="fas fa-arrow-left me-2"></i> Back</a>
            </div>
        </form>
    </div>

   <!--Modal for Preview -->
   <div id="formModal" class="modal" style="display: none;">
        <div class="modal-content"style="background-color: #f8f9fa; border-radius: 10px; max-width: 800px; margin: 20px auto; padding: 20px;">
            <!-- Modal Header -->
            <div class="modal-header"style=" color: white; border-top-left-radius: 10px; border-top-right-radius: 10px; padding: 15px;">
                <h2 class="modal-title">पंजीकरण विवरण</h2>
                <span class="close-modal" style="cursor: pointer; font-size: 24px; color: white;">&times;</span>
            </div>
            <!-- Modal Body -->
            <div class="modal-body" style="overflow-x: auto;">
                <!-- Personal Information Section -->
                <h4 class="modal-title">व्यक्तिगत जानकारी / Personal Information</h4>
                <table class="table table-bordered" style="width: 100%; margin-bottom: 1rem;">
                    <tbody>
                        <tr id="modalReferralCodeContainer">
                            <th style="width: 40%;">रेफरल कोड</th>
                            <td><span id="modalReferralCode">N/A</span></td>
                        </tr>
                        <tr id="modalNameContainer">
                            <th>नाम (First Name)</th>
                            <td><span id="modalName">N/A</span></td>
                        </tr>
                        <tr id="modalLastNameContainer">
                            <th>उप-नाम (Last Name)</th>
                            <td><span id="modalLastName">N/A</span></td>
                        </tr>
                        <tr id="modalDOBContainer">
                            <th>जन्मतिथि</th>
                            <td><span id="modalDOB">N/A</span></td>
                        </tr>
                        <tr id="modalBloodGroupContainer">
                            <th>रक्त-गट / Blood Group</th>
                            <td><span id="modalBloodGroup">N/A</span></td>
                        </tr>
                        <tr id="modalProfessionContainer">
                            <th>श्रेणी</th>
                            <td><span id="modalProfession">N/A</span></td>
                        </tr>
                        <tr id="modalStudentTypeContainer">
                            <th>स्कूल विद्यार्थी</th>
                            <td><span id="modalStudentType">N/A</span></td>
                        </tr>
                        <tr id="modalUniversityContainer">
                            <th>विश्वविद्यालय</th>
                            <td><span id="modalUniversity">N/A</span></td>
                        </tr>
                        <tr id="modalInstituteContainer">
                            <th>संस्थान</th>
                            <td><span id="modalInstitute">N/A</span></td>
                        </tr>
                        <tr id="modalCollegeStudentTypeContainer">
                            <th>कॉलेज विद्यार्थी / प्राध्यापक</th>
                            <td><span id="modalCollegeStudentType">N/A</span></td>
                        </tr>
                        <tr id="modalCourseContainer">
                            <th>Course (विषय)</th>
                            <td><span id="modalCourse">N/A</span></td>
                        </tr>
                        <tr id="modalSocialWorkAreaContainer">
                            <th>Area of Work</th>
                            <td><span id="modalSocialWorkArea">N/A</span></td>
                        </tr>
                        <tr id="modalTeacherTypeContainer">
                            <th>अध्यापक</th>
                            <td><span id="modalTeacherType">N/A</span></td>
                        </tr>
                        <tr id="modalProfessionTypeContainer">
                            <th>प्रोफेशनल</th>
                            <td><span id="modalProfessionType">N/A</span></td>
                        </tr>
                        <tr id="modalProfessionSubTypeContainer">
                            <th>प्रोफेशनल प्रकार</th>
                            <td><span id="modalProfessionSubType">N/A</span></td>
                        </tr>
                        <tr id="modalIndustrialistTypeContainer">
                            <th>उद्योगपति</th>
                            <td><span id="modalIndustrialistType">N/A</span></td>
                        </tr>
                        <tr id="modalBusinessTypeContainer">
                            <th>व्यवसायी</th>
                            <td><span id="modalBusinessType">N/A</span></td>
                        </tr>
                        <tr id="modalGenderContainer">
                            <th>लैंगिक जानकारी</th>
                            <td><span id="modalGender">N/A</span></td>
                        </tr>
                        <tr id="modalCurrentAddressContainer">
                            <th>वर्तमान पता (Current Address)</th>
                            <td><span id="modalCurrentAddress">N/A</span></td>
                        </tr>
                        <tr id="modalPermanentAddressContainer">
                            <th>स्थायी पता (Permanent Address)</th>
                            <td><span id="modalPermanentAddress">N/A</span></td>
                        </tr>
                        <tr id="modalAddressPincodeContainer">
                            <th>पिनकोड (वर्तमान निवास का)</th>
                            <td><span id="modalAddressPincode">N/A</span></td>
                        </tr>
                        <tr id="modalAddressNagarContainer">
                            <th>निवास का नगर</th>
                            <td><span id="modalAddressNagar">N/A</span></td>
                        </tr>
                        <tr id="modalAddressStateContainer">
                            <th>राज्य</th>
                            <td><span id="modalAddressState">N/A</span></td>
                        </tr>
                    </tbody>
                </table>
            
                <!-- Sangh Related Information Part 1 -->
                <h4 class="modal-title">संघ संबंधी जानकारी भाग - 1</h4>
                <table class="table table-bordered" style="width: 100%; margin-bottom: 1rem;">
                    <tbody>
                        <tr id="modalRssAssociationContainer">
                            <th style="width: 40%;">आप संघ(RSS) से किस माध्यम से जुड़े हुए हैं ..?</th>
                            <td><span id="modalRssAssociation">N/A</span></td>
                        </tr>
                        <tr id="modalVividhSangathanContainer">
                            <th>विविध संगठन</th>
                            <td><span id="modalVividhSangathan">N/A</span></td>
                        </tr>
                        <tr id="modalSocialInterestsContainer">
                            <th>समाज जीवन में किस प्रकार के क्षेत्र में आपकी रुचि है..?</th>
                            <td><span id="modalSocialInterests"></span></td>
                        </tr>
                        <tr id="modalSakhaMilan2Container">
                            <th>शाखा / मिलन</th>
                            <td><span id="modalSakhaMilan2">N/A</span></td>
                        </tr>
                        <tr id="modalActivityContainer">
                            <th>गतिविधि</th>
                            <td><span id="modalActivity">N/A</span></td>
                        </tr>
                        <tr id="modalResponsibilityContainer">
                            <th>आपके पास किसी प्रकार का दायित्व है..?</th>
                            <td><span id="modalResponsibility">N/A</span></td>
                        </tr>
                        <tr id="modalPincodeContainer">
                            <th>पिनकोड (जिस प्रांत में आपका दायित्व है।)</th>
                            <td><span id="modalPincode">N/A</span></td>
                        </tr>
                        <tr id="modalNagarContainer">
                            <th>नगर</th>
                            <td><span id="modalNagar">N/A</span></td>
                        </tr>
                        <tr id="modalStateContainer">
                            <th>राज्य</th>
                            <td><span id="modalState">N/A</span></td>
                        </tr>
                        <tr id="modalUpbastiContainer">
                            <th>रेजिडेंशियल कॉलोनी (ब्लॉक/गली)</th>
                            <td><span id="modalUpbasti">N/A</span></td>
                        </tr>
                        <tr id="modalEkaiContainer">
                            <th>दायित्व की इकाई</th>
                            <td><span id="modalEkai">N/A</span></td>
                        </tr>
                        <tr id="modalDayitvaContainer">
                            <th>दायित्व</th>
                            <td><span id="modalDayitva">N/A</span></td>
                        </tr>
                        <tr id="modalPrantContainer">
                            <th>दायित्व का प्रान्त</th>
                            <td><span id="modalPrant">N/A</span></td>
                        </tr>
                        <tr id="modalVibhagContainer">
                            <th>दायित्व का विभाग</th>
                            <td><span id="modalVibhag">N/A</span></td>
                        </tr>
                        <tr id="modalJilaContainer">
                            <th>दायित्व का जिला</th>
                            <td><span id="modalJila">N/A</span></td>
                        </tr>
                        <tr id="modalEkaiNagarContainer">
                            <th>दायित्व का नगर</th>
                            <td><span id="modalEkaiNagar">N/A</span></td>
                        </tr>
                        <tr id="modalMandalContainer">
                            <th>दायित्व का मंडल</th>
                            <td><span id="modalMandal">N/A</span></td>
                        </tr>
                        <tr id="modalBastiContainer">
                            <th>दायित्व की बस्ती</th>
                            <td><span id="modalBasti">N/A</span></td>
                        </tr>
                        <tr id="modalSakhaMilanCheckboxContainer">
                            <th>क्या आप मिलन से जुड़े हैं?</th>
                            <td><span id="modalSakhaMilanCheckbox">N/A</span></td>
                        </tr>
                        <tr id="modalSakhaMilanContainer">
                            <th>शाखा / मिलन</th>
                            <td><span id="modalSakhaMilan">N/A</span></td>
                        </tr>
                    </tbody>
                </table>
            
                <!-- Sangh Related Information Part 2 -->
                <h3 class="modal-title">संघ संबंधी जानकारी भाग - 2</h3>
                <!-- Sangh Shikshan Subsection -->
                <h5 class="modal-title">संघ शिक्षण</h5>
                <table class="table table-bordered" style="width: 100%; margin-bottom: 1rem;">
                    <tbody>
                        <tr id="modalSanghSikshanLevelContainer">
                            <th style="width: 40%;">संघ शिक्षण</th>
                            <td><span id="modalSanghSikshanLevel">N/A</span></td>
                        </tr>
                        <tr id="modalPratigyaCheckboxContainer">
                            <th>आपकी प्रतिज्ञा हुई है?</th>
                            <td><span id="modalPratigyaCheckbox">N/A</span></td>
                        </tr>
                        <tr id="modalPrarambhikYearContainer">
                            <th>प्रारम्भिक वर्ग</th>
                            <td><span id="modalPrarambhikYear">N/A</span></td>
                        </tr>
                        <tr id="modalPrathmikYearContainer">
                            <th>प्राथमिक वर्ग</th>
                            <td><span id="modalPrathmikYear">N/A</span></td>
                        </tr>
                        <tr id="modalPrathamYearContainer">
                            <th>संघ शिक्षा वर्ग / प्रथम वर्ष</th>
                            <td><span id="modalPrathamYear">N/A</span></td>
                        </tr>
                        <tr id="modalDwitiyaYearContainer">
                            <th>कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष</th>
                            <td><span id="modalDwitiyaYear">N/A</span></td>
                        </tr>
                        <tr id="modalTritiyaYearContainer">
                            <th>कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष</th>
                            <td><span id="modalTritiyaYear">N/A</span></td>
                        </tr>
                    </tbody>
                </table>
            
                <!-- Ghosh Related Information Subsection -->
                <h5 class="modal-title">घोष संबंधी जानकारी</h5>
                <table class="table table-bordered" style="width: 100%; margin-bottom: 1rem;">
                    <tbody>
                        <tr id="modalGhoshVadakContainer">
                            <th style="width: 40%;">क्या आप घोष वादक हैं?</th>
                            <td><span id="modalGhoshVadak">N/A</span></td>
                        </tr>
                        <tr id="modalVadyaContainer">
                            <th style="width: 40%;">वाद्य</th>
                            <td><span id="modalVadya"></span></td>
                        </tr>
                        <tr id="modalShankhShrungOwnContainer">
                            <th>शंख/श्रृंग वाद्य आपका अपना है?</th>
                            <td><span id="modalShankhShrungOwn">N/A</span></td>
                        </tr>
                        <tr id="modalRachnayeContainer">
                            <th>रचनाएँ</th>
                            <td><span id="modalRachnaye">N/A</span></td>
                        </tr>
                        <tr id="modalLearnVadyaContainer">
                            <th>वाद्य सीखने के इच्छुक हैं..?</th>
                            <td><span id="modalLearnVadya">N/A</span></td>
                        </tr>
                        <tr id="modalLearnVadyaListContainer">
                            <th>वाद्य</th>
                            <td><span id="modalLearnVadyaList">N/A</span></td>
                        </tr>
                        <tr id="modalGanveshContainer">
                            <th style="width: 40%;">गणवेश संबंधी जानकारी</th>
                            <td><span id="modalGanvesh"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Modal Footer -->
            <div class="modal-footer d-flex justify-content-center mt-4"style="background-color: #e9ecef; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; padding: 15px;">
                <button type="button" class="class-modal btn btn-success btn-sm border border-2 w-auto"style="margin-right: 10px;">Edit</button>
                <button id="finalSubmit" class="btn btn-success btn-sm w-auto">Confirm Submit</button>
            </div>
        </div>
    </div>

   <!-- Bootsrap -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
   <!-- SweetAlert2 JavaScript -->
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.21/dist/sweetalert2.all.min.js"></script>

   <!-- Add GSAP library -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
   <script>
      let mappings = {}; 
      async function getMappings() {
        try {
        const response = await fetch('/get-registration-mappings/');
        const data = await response.json();
        mappings = data;
        } catch (error) {
        console.error("❌ Error fetching mappings:", error);
        }
      }
    document.addEventListener("DOMContentLoaded", async () => {
      await getMappings();

     
        const formData = {
        {% for field in form %}
            "{{ field.name }}": "{{ field.value|default_if_none:''|escapejs }}"{% if not forloop.last %},{% endif %}
        {% endfor %}
    };

    console.log("All form data:", formData);
    const mappingsss = {
         prantToVibhag: {
               'दिल्ली': ['विभाग 1-1', 'विभाग 1-2', 'विभाग 2-1', 'विभाग 2-2'],
         },
         VibhagToJila: {
               'विभाग 1-1': ['जिला 1-1-1', 'जिला 1-1-2'],
               'विभाग 1-2': ['जिला 1-2-1', 'जिला 1-2-2'],
               'विभाग 2-1': ['जिला 2-1-1', 'जिला 2-1-2'],
               'विभाग 2-2': ['जिला 2-2-1', 'जिला 2-2-2'],
         },
         jilaToNagar: {
               'जिला 1-1-1': ['नगर 1-1-1', 'नगर 1-1-2'],
               'जिला 1-1-2': ['नगर 1-1-3', 'नगर 1-1-4'],
               'जिला 1-2-1': ['नगर 1-2-1', 'नगर 1-2-2'],
               'जिला 1-2-2': ['नगर 1-2-3', 'नगर 1-2-4'],
               'जिला 2-1-1': ['नगर 2-1-1', 'नगर 2-1-2'],
               'जिला 2-1-2': ['नगर 2-1-3', 'नगर 2-1-4'],
               'जिला 2-2-1': ['नगर 2-2-1', 'नगर 2-2-2'],
               'जिला 2-2-2': ['नगर 2-2-3', 'नगर 2-2-4'],
         },
         nagarToMandal: {
               'नगर 1-1-1': ['मंडल 1-1-1-1', 'मंडल 1-1-1-2'],
               'नगर 1-1-2': ['मंडल 1-1-2-1', 'मंडल 1-1-2-2'],
               'नगर 1-2-1': ['मंडल 1-2-1-1', 'मंडल 1-2-1-2'],
               'नगर 1-2-2': ['मंडल 1-2-2-1', 'मंडल 1-2-2-2'],
         },
         mandalToBasti: {
               'मंडल 1-1-1-1': ['बस्ती 1-1-1-1-1', 'बस्ती 1-1-1-1-2'],
               'मंडल 1-1-1-2': ['बस्ती 1-1-1-2-1', 'बस्ती 1-1-1-2-2'],
               'मंडल 1-2-1-1': ['बस्ती 1-2-1-1-1', 'बस्ती 1-2-1-1-2'],
               'मंडल 1-2-1-2': ['बस्ती 1-2-1-2-1', 'बस्ती 1-2-1-2-2'],
         },
         bastiToUpbasti: {
               'बस्ती 1-1-1-1-1': ['उपबस्ती 1-1-1-1-1-1', 'उपबस्ती 1-1-1-1-1-2'],
               'बस्ती 1-1-1-1-2': ['उपबस्ती 1-1-1-1-2-1', 'उपबस्ती 1-1-1-1-2-2'],
               'बस्ती 1-2-1-1-1': ['उपबस्ती 1-2-1-1-1-1', 'उपबस्ती 1-2-1-1-1-2'],
               'बस्ती 1-2-1-1-2': ['उपबस्ती 1-2-1-1-2-1', 'उपबस्ती 1-2-1-1-2-2'],
         },
         dayitvaMapping: {
               prant: ['दायित्व प्रांत 1', 'दायित्व प्रांत 2'],
               vibhag: ['दायित्व विभाग 1', 'दायित्व विभाग 2'],
               jila: ['दायित्व जिला 1', 'दायित्व जिला 2'],
               ekai_nagar: ['दायित्व नगर 1', 'दायित्व नगर 2'],
               akhilbhartiya: ['दायित्व akhil 1', 'दायित्व akhil 2'],
               chetra: ['दायित्व area 1', 'दायित्व area 2'],
               mandal: ['दायित्व मंडल 1', 'दायित्व मंडल 2'],
               basti: ['दायित्व बस्ती 1', 'दायित्व बस्ती 2'],
               upbasti: ['दायित्व उपबस्ती 1', 'दायित्व उपबस्ती 2'],
         },
         pincodeToNagar: {
               "110001": ["नगर 1-1-1", "नगर 1-1-2"],
               "110002": ["नगर 1-1-3"],
               "110003": ["नगर 1-1-4"],
               "110004": ["नगर 1-2-1"],
               "110005": ["नगर 1-2-2"],
               "110006": ["नगर 1-2-3"],
         },
         delhiPincodes: ["110001", "110002", "110003"],
         statePincodes: ["110004", "110005", "110006"],
         pincodeToState: {
               "110004": ['state-1', "state-2"],
               "110005": ['state-3', "state-4"],
               "110006": ['state-5', "state-6"],
         },
          // Universities and their institutes
        collageAffiliated : {
            "Delhi Technical University": ["Delhi Technical University"],
            "Indraprastha Institute of Information Technology-Delhi": ["Indraprastha Institute of Information Technology-Delhi"],
            "Indira Gandhi Delhi Technical University for Women": ["Indira Gandhi Delhi Technical University for Women"]
        },
        // Courses and their streams
        category_name : {
                "Engineering": [
                "Computer Science Engineering",
                "Mechanical Engineering",
                "Civil Engineering"
                ],
                "Medical": [
                "MBBS", "BDS", "BPT", "BAMS", "BHMS", "BUMS", "BSc Nursing",
                "Pharmacy", "MD", "MS"
                ],
        },
    };
    const sangathanToReferralCode = {
        "अखिल भारतीय विद्यार्थी परिषद": "ABVP", "विद्याभारती": "VIBH", "भारतीय शिक्षण मंडल": "BSM", "अखिल भारतीय शैक्षिक महासंघ": "ABSM", "संस्कृत भारती": "SBH", "शिक्षा संस्कृति उत्थान न्यास": "SSUN", "वनवासी कल्याण आश्रम": "VKA", "विश्व हिन्दू परिषद्": "VHP",
        "भारतीय जनता पार्टी": "BJP", "राष्ट्रीय सिक्ख संगत": "RSN", "क्रीडा भारती": "KRBH", "संस्कार भारती": "SASB", "सक्षम": "SKSM", "आरोग्य भारती": "AABH", "एन्. एम्. ओ. (नैशनल मैडिकल आर्गेनाइजेशन)": "NMO",
        "भारत विकास परिषद": "BHVP", "दीनदयाल शोध संस्थान": "DDSS", "राष्ट्रीय सेवा भारती": "RSBH", "भारतीय किसान संघ": "BKS", "भारतीय मजदूर संघ": "BMS", "स्वदेशी जागरण मंच": "SJM",
        "सहकार भारती": "SHBH", "ग्राहक पंचायत": "GRHP", "लघु उद्योग भारती": "LUBH", "अखिल भारतीय साहित्य परिषद": "ABSP", "अधिवक्ता परिषद": "ADVP", "प्रज्ञा प्रवाह": "PRPR",
        "विज्ञान भारती": "VBH", "अखिल भारतीय इतिहास संकलन समिति": "ABSS", "पूर्व सैनिक सेवा परिषद": "PSSP", "हिन्दु जागरण मंच": "HJM", "सीमा जागरण मंच": "SIJM",
        "स्वामी विवेकानन्द मेडिकल मिशन": "SVMM", "दिल्ली अध्यापक परिषद्": "DAP", "सुरूचि प्रकाशन": "SRPR", "इंद्रप्रस्थ विश्व संवाद केंद्र": "IVSK", "राष्ट्र सेविका समिति": "RSS", "हिन्दुस्थान समाचार": "HINS", "SUYASH": "SUYASH"
    };
    const sakha_milan = [
        "स्कूल विद्यार्थी", "कॉलेज विद्यार्थी", "तरुण व्यवसायी", "प्रौढ़ व्यवसायी", "Young Professional", "प्राध्यापक", "Summer Camp","परिवार मिलन","अन्य", "अभी तक किसी शाखा/मिलन से नहीं जुड़े हैं / सज्जन शक्ति",
    ]

    const fieldToHindiMapping = {
        sub_category_type:"उप-श्रेणी",
        prant: "प्रांत", vibhag: "विभाग", jila: "जिला", nagar: "नगर", address_nagar: "नगर", mandal: "मंडल", basti: "बस्ती", upbasti: "उपबस्ती", ekai_nagar: "नगर",
        sakha_milan: "शाखा / मिलन", vividhSangathan: "विविध संगठन", "akhilbhartiya": "अखिलभारतीय", "chetra": "क्षेत्र",
    };

    const hindiToEnglishMapping = {
        "प्रांत": "prant", "विभाग": "vibhag", "जिला": "jila", "नगर": "nagar", "नगर": "address_nagar", "मंडल": "mandal", "बस्ती": "basti", "उपबस्ती": "upbasti", "नगर": "ekai_nagar",
        "शाखा / मिलन": "sakha_milan", "विविध संगठन": "vividhSangathan", "अखिलभारतीय": "akhilbhartiya", "क्षेत्र": "chetra",
    };
    
     // Professional categories data structure
     const professionals =
    {
        "Medical Professionals": [
            "Doctors","Surgeons","Dentists","Physiotherapists","Psychiatrists"
        ],
        "Engineering Professionals": [
            "Civil Engineer", "Mechanical Engineer", "Electrical Engineer", "Software Engineers"
        ],
        "Legal Professionals": [
            "Lawyers", "Judges", "Legal Consultants"
        ],
        "Finance Professionals": [
            "Chartered Accountants (CA)", "Financial Analysts", "Auditors"
        ],
        "Education Professionals": [
            "Teachers", "Professors", "Education Consultants"
        ],
        "IT Professionals": [
            "Software Developers", "System Analysts", "Cybersecurity Experts"
        ],
        "Design Professionals": [
            "Architects", "Interior Designers", "Graphic Designers"
        ],
        "Media & Communication": [
            "Journalists", "Anchors", "Public Relations Officers"
        ],
        "Art & Culture": [
            "Musicians", "Painters", "Dancers", "Writers"
        ],
        "Management Professionals": [
            "HR Managers", "Operations Managers", "Marketing Professionals"
        ]
    };

    let isFirst = true;
    updateShikshanFields();
    
    function initializeCheckboxes(fieldIds, selectedValues) {
        const relatedIds = ['turya', 'swarad', 'nagang', 'gomukh', 'other'];
        const selectedSet = new Set(selectedValues); 
        fieldIds.forEach(id => {
            const checkbox = document.getElementById(id);
            if (!checkbox) return; 
            if (selectedSet.has(checkbox.value)) {
                checkbox.checked = true;
                if (id === 'shrung') {
                    relatedIds.forEach(relatedId => {
                        const container = document.getElementById(`${relatedId}-container`);
                        container?.classList.remove('hidden-checkbox');
                    });
                }
            }
        });
    }

    function initializeRadioButtons(name, selectedValue) {
        const learnIds = ['learnTurya', 'learnSwarad', 'learnNagang', 'learnGomukh', 'learnOther'];
        const radios = document.querySelectorAll(`input[name="${name}"]`);
        radios.forEach(radio => {
            if (radio.value !== selectedValue) return; 
            radio.checked = true;
            if (radio.id === 'learnShrung') {
                learnIds.forEach(id => {
                    document.getElementById(`${id}-container`)?.classList.remove('hidden-checkbox');
                });
            }
        });
    }
    // Initialize single checkbox
    function initializeSingleCheckbox(id, value) {
        const checkbox = document.getElementById(id);
        if (checkbox) {
            checkbox.checked = value === 'true';
        }
    }


    function newpopulateDropdown(field, options,placeholder) {
        let dropdown = document.getElementById(field);
        dropdown.innerHTML = ""; 
        dropdown.innerHTML = `<option value="" disabled selected>${placeholder}</option>`;

        let first_options = [];
        let second_options = [];
        first_options = options[0] || ""; 
        second_options = options[1] || "";
        if (first_options) {
            let defaultOption = document.createElement("option");
            defaultOption.value =first_options;
            defaultOption.textContent =first_options;
            defaultOption.selected = true;
            dropdown.appendChild(defaultOption);
        }
        if(second_options){
            second_options.forEach(option => {
                if(option != first_options && option.length > 0){
                const opt = document.createElement("option");
                opt.value = option;
                opt.textContent = fieldToHindiMapping[option] ? fieldToHindiMapping[option] : option;
                dropdown.appendChild(opt);
                }
            }); 
        }
    }


    let vividhsangathan = "{{form.vividhsangathan.value}}";
    if(vividhsangathan != "None"){
      options = ["अखिल भारतीय विद्यार्थी परिषद", "विद्याभारती", "भारतीय शिक्षण मंडल","अखिल भारतीय शैक्षिक महासंघ", "संस्कृत भारती", "शिक्षा संस्कृति उत्थान न्यास", "वनवासी कल्याण आश्रम", "विश्व हिन्दू परिषद्", "भारतीय जनता पार्टी", "राष्ट्रीय सिक्ख संगत", "क्रीडा भारती", "संस्कार भारती", "सक्षम",
            "आरोग्य भारती", "एन्. एम्. ओ. (नैशनल मैडिकल आर्गेनाइजेशन)"];
        newpopulateDropdown("vividhSangathan", [vividhsangathan,options], "विविध संगठन");
        document.getElementById("vividhSangathan").style.display = "block";
    }
    let isFirstTime = true;
    let rssAssociation = "{{ form.rss_association.value }}";

    function initializeSanghPart1(){
        let addresspincode = "{{form.address_pincode.value}}";
        let addressstate = "{{form.address_state.value}}";
        let addressnagar = "{{form.nagar_address.value}}";
        let profession = "{{form.user_type.value}}";
        let university = "{{form.affilated_by.value}}";
        let institute_name = "{{ form.institute_name.value }}";
        let category_name = "{{ form.category_name.value }}";
        let course_name = "{{ form.course_name.value }}";
        let profession_type = "{{ form.profession_type.value }}";
        let profession_subtype = "{{ form.profession_subtype.value }}";
        let pincode = "{{form.pincode.value}}";
        let nagar = "{{form.nagar.value}}";
        let state = "{{ form.state.value }}";
        let upbasti = "{{ form.ekai_upbasti.value }}";
        let ekai = "{{ form.ekai.value }}";
        let dayitv = "{{ form.dayitv.value }}";
        let prants = "{{ form.prant.value }}";
        let vibhag = "{{ form.vibhag.value }}";
        let jila = "{{ form.jila.value }}";
        let ekainagar = "{{ form.ekai_nagar.value }}";
        let mandal = "{{ form.ekai_mandal.value }}";
        let basti = "{{ form.ekai_basti.value }}";
        let sakhamilan = "{{ form.ekai_sakha_milan.value }}";
        let rssAssociation = "{{ form.rss_association.value }}";
        console.log("rssAssociation", sakhamilan, "{{ form.ekai_sakha_milan.value }}");
       
        let options = [];
        if(pincode){
            document.getElementById("pincode").value = pincode;
        }

        if (addresspincode != "None" && addressnagar != "None" && mappings.pincodeToNagar[addresspincode]) {
            newpopulateDropdown("address_nagar", [addressnagar, mappings.pincodeToNagar[addresspincode]], "नगर"); 
        }
        if (addresspincode!= "None"  && addressstate != "None" && mappings.pincodeToState[addresspincode]) {
            newpopulateDropdown("address_state", [addressstate, mappings.pincodeToState[addresspincode]], "राज्य"); 
        }
        console.log(profession);
        if(profession === "कॉलेज-विद्यार्थी" || profession === "प्राध्यापक"){
            newpopulateDropdown("university",[university, Object.keys(mappings.collageAffiliated)],"विश्वविद्यालय");
            console.log("Institute", mappings.collageAffiliated[university]);
            console.log("mappings.collageAffiliated", Object.keys(mappings.collageAffiliated));
            newpopulateDropdown("institute",[institute_name, mappings.collageAffiliated[university]],"संस्थान");
            newpopulateDropdown("course",[category_name, Object.keys[mappings.category_name]],"विषय");
        }
        if(profession === "प्रोफेशनल"){
            newpopulateDropdown("professionSubType", [profession_subtype, professionals[profession_type]], "प्रोफेशनल प्रकार");
        }

        if (pincode != "None" && nagar != "None" && mappings.pincodeToNagar[pincode]) {
            newpopulateDropdown("nagar", [nagar, mappings.pincodeToNagar[pincode]], "नगर"); 
            console.log("nagar");
            document.getElementById("nagar-container").style.display = "block";
        }
        if (state != "None" && pincode && mappings.pincodeToNagar[pincode]) {
            newpopulateDropdown("state", [state, mappings.pincodeToState[pincode]], "राज्य"); 
            document.getElementById("state-container").style.display = "block";
        }
        if (nagar!= "None"  && upbasti!= "None"  ) {
            let mandals = mappings.nagarToMandal[nagar] || [];
            options = mandals.flatMap(mandal => mappings.mandalToBasti[mandal] || []);
            newpopulateDropdown("upbasti", [upbasti,options], "उपबस्ती");
            console.log("upbasti");
            document.getElementById("upbasti-container").style.display = "block";
        }
    
        if(upbasti!= "None"  && ekai!= "None" ){
            options = ["प्रांत", "विभाग", "जिला", "नगर", "मंडल", "बस्ती", "शाखा / मिलन", "अखिलभारतीय", "क्षेत्र"];
            newpopulateDropdown("ekai", [ekai,options], "इकाई");
            document.getElementById("ekai-container").style.display = "block";
        }
        
        if(sakhamilan != "None"){
            options = ["स्कूल विद्यार्थी","कॉलेज विद्यार्थी", "तरुण व्यवसायी", "प्रौढ़ व्यवसायी", "Young Professional", "प्राध्यापक", "अन्य" ,"अभी किसी शाखा/मिलन से नहीं जुड़े हैं"];
            if(sakhamilan){
                newpopulateDropdown("sakha_milan", [sakhamilan, options], "शाखा / मिलन");
                newpopulateDropdown("sakha_milan2", [sakhamilan, options], "शाखा / मिलन");
            }else{
                populateDropdown("sakha_milan", options, "शाखा / मिलन");
                populateDropdown("sakha_milan2", options, "शाखा / मिलन");
            }
            document.getElementById("sakha_milan-container").style.display = "block";
            if(rssAssociation === "शाखा" || rssAssociation === "मिलन"){
                // document.getElementById("sakha_milanCheckbox-container").style.display = "block";
                document.getElementById("sakha_milan2-container").style.display = "block";
            }
        }
        let selectedJila = Object.keys(mappings.jilaToNagar).find(jila =>
            mappings.jilaToNagar[jila].includes(nagar)
        );

        let selectedVibhag = Object.keys(mappings.VibhagToJila).find(vibhag =>
            mappings.VibhagToJila[vibhag].includes(selectedJila)
        );
        let selectedPrant = Object.keys(mappings.prantToVibhag).find(prant =>
            mappings.prantToVibhag[prant].includes(selectedVibhag)
        );

        if(prants!= "None" || ekai === "प्रांत"){
            options = mappings["prant"];
            newpopulateDropdown("prant", [prants, options], "प्रांत");
            document.getElementById("prant-container").style.display = "block";
        }

        if(vibhag!= "None"|| ekai === "विभाग"){
            options = mappings.prantToVibhag[selectedPrant];
            newpopulateDropdown("vibhag", [vibhag, options], "विभाग");
            document.getElementById("vibhag-container").style.display = "block";
        }
        if(jila!= "None" || ekai === "जिला"){
            options = mappings.VibhagToJila[selectedVibhag];
            newpopulateDropdown("jila", [jila, options], "जिला");
            document.getElementById("jila-container").style.display = "block";
        }
        if(ekainagar!= "None" || ekai === "नगर"){
            options = mappings.pincodeToNagar[pincode];
            newpopulateDropdown("ekai_nagar", [ekainagar, options], "नगर");
            console.log("ekai", ekai);
            document.getElementById("ekai_nagar-container").style.display = "block";
        }
        if(mandal!= "None"|| ekai === "मंडल" ){
            options = mappings.nagarToMandal[nagar];
            newpopulateDropdown("mandal", [mandal, options], "मंडल");
            document.getElementById("mandal-container").style.display = "block";
        }
        if(basti!= "None" || ekai === "बस्ती"){
            let mandals = mappings.nagarToMandal[nagar] || [];
            options = mandals.flatMap(mandal => mappings.mandalToBasti[mandal] || []);
            newpopulateDropdown("basti", [basti, options], "");
            document.getElementById("basti-container").style.display = "block";
        }
        if(upbasti!= "None" || nagar !== "None"){
            let mandals = mappings.nagarToMandal[nagar] || [];
            let bastis = mandals.flatMap(mandal => mappings.mandalToBasti[mandal] || []);
            options = bastis.flatMap(basti => mappings.bastiToUpbasti[basti] || []);
            newpopulateDropdown("upbasti", [upbasti, options], "");
            document.getElementById("upbasti-container").style.display = "block";
        }
        if(dayitv!= "None" ){
            if(ekai === `${fieldToHindiMapping["sakha_milan"]}`){
            options = mappings.dayitvaMapping["shakha"];
            }
            else{
            options = mappings.dayitvaMapping[`${hindiToEnglishMapping[ekai]}`];
            }
            newpopulateDropdown("dayitva", [dayitv, options], "दायित्व");
            document.getElementById("dayitva-container").style.display = "block";
        }
    }


    initializeSanghPart1();
        // घोष संबंधी जानकारी
        let shiksha = "{{ form.shiksha.value }}";
        let aarthik = "{{ form.aarthik.value }}";
        let dharmik = "{{ form.dharmik.value }}";
        let seva = "{{ form.seva.value }}";
        let swasthya = "{{ form.swasthya.value }}";
        let samajik = "{{ form.samajik.value }}";
        let sanskritik = "{{ form.sanskritik.value }}";
        let vaicharik = "{{ form.vaicharik.value }}";
        let suraksha = "{{ form.suraksha.value }}";
        let media = "{{ form.media.value }}";
      
        let ekai_milaan = "{{ form.ekai_milaan.value }}";
        let pratigya = "{{ form.pratigya.value }}";
        let ghosh_vadak = "{{ form.ghosh_vadak.value }}";
        let shankh = "{{ form.shankh.value }}";
        let shrung = "{{ form.shrung.value }}";
        let turya = "{{ form.turya.value }}";
        let swarad = "{{ form.swarad.value }}";
        let nagang = "{{ form.nagang.value }}";
        let gomukh = "{{ form.gomukh.value }}";
        let other = "{{ form.other.value }}";
        let aanak = "{{ form.aanak.value }}";
        let panav = "{{ form.panav.value }}";
        let jhallari = "{{ form.jhallari.value }}";
        let tribhuj = "{{ form.tribhuj.value }}";
        let shankh_shrung_own = "{{ form.shankh_shrung_own.value }}";
        let rachnaye = "{{ form.rachnaye.value }}";
        let learn_vadya = "{{ form.learn_vadya.value }}";
        let learn_vadya_list = "{{ form.learn_vadya_list.value }}";

        // गणवेश संबंधी जानकारी
        let sanghpant = "{{ form.sanghpant.value }}";
        let whiteshirt = "{{ form.whiteshirt.value }}";
        let sanghtopi = "{{ form.sanghtopi.value }}";
        let sanghpeti = "{{ form.sanghpeti.value }}";
        let jurab = "{{ form.jurab.value }}";
        let joote = "{{ form.joote.value }}";
        let dand = "{{ form.dand.value }}";
        let responsibility_yes_no = "{{ form.responsibility.value}}";

        if(responsibility_yes_no){
            initializeRadioButtons("responsibility_yes_no", responsibility_yes_no);
        }
        console.log(rssAssociation);
        if(rssAssociation === "Join RSS / जुड़ना चाहते हैं"){
            console.log("entered");
            document.getElementById("socialInterests-container").style.display = "block";
            const socialIds = ["shiksha", "aarthik", "dharmik", "seva", "swasthya", "samajik", "sanskritik", "vaicharik", "suraksha", "media"];
            const selectedInterests = [ shiksha, aarthik, dharmik, seva, swasthya, samajik, sanskritik, vaicharik, suraksha, media ].filter(val => val && val !== "None");
            initializeCheckboxes(socialIds, selectedInterests);

        }
        
        if(ekai_milaan !== "None"){
            initializeRadioButtons("ekai_milaan", ekai_milaan);
        }
        if(pratigya !== "None"){
            initializeRadioButtons("pratigya", pratigya);
        }

    // घोष संबंधी जानकारी
    if (ghosh_vadak !== "None") {
        initializeRadioButtons("ghosh_vadak", ghosh_vadak);

        const ghoshVadakYesContainer = document.getElementById("ghoshVadakYes-container");
        const ghoshVadakNoContainer = document.getElementById("ghoshVadakNo-container");

        if (ghosh_vadak === "हाँ") {
            ghoshVadakYesContainer.style.display = "block";
            ghoshVadakNoContainer.style.display = "none";

            // Initialize instrument checkboxes
            const instrumentIds = [
                "shankh", "shrung", "turya", "swarad", "nagang",
                "gomukh", "other", "aanak", "panav", "jhallari", "tribhuj"
            ];
            const selectedInstruments = [
                shankh, shrung, turya, swarad, nagang,
                gomukh, other, aanak, panav, jhallari, tribhuj
            ].filter(val => val && val !== "None");
            initializeCheckboxes(instrumentIds, selectedInstruments);
            document.getElementById("shankhShrungOwn-container").style.display = "none";
            if(shrung === "None"){
              document.getElementById("shankhShrungOwn-container").style.display = "block";
              initializeRadioButtons("shankh_shrung_own", shankh_shrung_own);
            }
            if (rachnaye !== "None") {
                initializeRadioButtons("rachnaye", rachnaye);
            }
        } else {
            ghoshVadakYesContainer.style.display = "none";
            ghoshVadakNoContainer.style.display = "block";

            // Initialize learn_vadya radio buttons
            if (learn_vadya !== "None") {
                initializeRadioButtons("learn_vadya", learn_vadya);

                const learnVadyaListContainer = document.getElementById("learnVadyaList-container");
                if (learn_vadya === "हाँ") {
                    learnVadyaListContainer.style.display = "block";
                    if (learn_vadya_list !== "None") {
                        initializeRadioButtons("learn_vadya_list", learn_vadya_list);
                    }
                } else {
                    learnVadyaListContainer.style.display = "none";
                }
            }
        }
    }

    // गणवेश संबंधी जानकारी
    const ganveshIds = ["sanghPant", "safedKameez", "sanghTopi", "sanghPeti","jurab", "joote", "dand"];
    const selectedGanvesh = [sanghpant, whiteshirt, sanghtopi, sanghpeti, jurab, joote, dand ].filter(val => val && val !== "None");
    initializeCheckboxes(ganveshIds, selectedGanvesh);

  //******/ particle animation background js *******
    const particlesContainer = document.getElementById('particles');
    const particles = [];
    const numParticles = 200;

    class Particle {
        constructor() {
            this.element = document.createElement('span');
            this.element.className = 'particle';
            this.size = Math.random() * 4 + 2; // Increased size range: 2px to 6px
            this.element.style.width = `${this.size}px`;
            this.element.style.height = `${this.size}px`;
            particlesContainer.appendChild(this.element);
            this.width = window.innerWidth;
            this.height = document.body.scrollHeight;
            this.x = Math.random() * this.width;
            this.y = Math.random() * this.height;
            this.speedX = Math.random() * 2 - 1;
            this.speedY = Math.random() * 2 - 1;
            this.updatePosition();
        }

        updatePosition() {
            this.element.style.left = `${this.x}px`;
            this.element.style.top = `${this.y}px`;
        }

        update() {
            this.x += this.speedX;
            this.y += this.speedY;

            // Bounce off boundaries, accounting for particle size
            if (this.x < 0 || this.x > this.width - this.size) this.speedX *= -1;
            if (this.y < 0 || this.y > this.height - this.size) this.speedY *= -1;

            this.updatePosition();
        }
    }

    function updateContainerSize() {
        const width = window.innerWidth;
        const height = document.body.scrollHeight;
        particlesContainer.style.height = `${height}px`;
        return { width, height };
    }

    function init() {
        particles.length = 0;
        particlesContainer.innerHTML = ''; 
        const { width, height } = updateContainerSize();
        for (let i = 0; i < numParticles; i++) {
            const particle = new Particle();
            particle.width = width;
            particle.height = height;
            particles.push(particle);
        }
    }

    function animate() {
        particles.forEach(particle => particle.update());
        requestAnimationFrame(animate);
    }

    init();
    animate();
    window.addEventListener('resize', () => {
        const { width, height } = updateContainerSize();
        particles.forEach(particle => {
            particle.width = width;
            particle.height = height;
            if (particle.x > width - particle.size) particle.x = Math.random() * width;
            if (particle.y > height - particle.size) particle.y = Math.random() * height;
        });
    });
    const resizeObserver = new ResizeObserver(() => {
        init();
    });
    resizeObserver.observe(document.body);


    // Handle university selection
    document.getElementById('university').addEventListener('change', function () {
        const selectedUni = this.value;
        populateDropdown("institute", mappings.collageAffiliated[selectedUni] || [], "संस्थान");
    });

    // Listener for institute selection to auto-select type
    document.getElementById("institute").addEventListener("change", function () {
        const selectedInstitute = this.value;
        const mainSelect = document.getElementById("university");

        if (!selectedInstitute) return;

        for (const [category, suboptions] of Object.entries(mappings.collageAffiliated)) {
            if (suboptions.includes(selectedInstitute)) {
                mainSelect.value = category;
                // populateDropdown("institute", suboptions, "संस्थान");
                this.value = selectedInstitute;
                break;
            }
        }
    });


    //Sangh sikhshan js
    const shikshanSelect = document.getElementById('sangh_shikshan_level');
    shikshanSelect.addEventListener('change', updateShikshanFields);
    
    // Function to update shikshan fields
    function updateShikshanFields() {
        const pratigyaContainer = document.getElementById("pratigyaCheckbox-container");
        const pratigyaYes = document.getElementById("pratigyaCheckboxYes");
        const pratigyaNo = document.getElementById("pratigyaCheckboxNo");
        const level = document.getElementById("sangh_shikshan_level").value;
        const container = document.getElementById("shikshan-details-container");
        container.innerHTML = "";

        if (level === 'कोई शिक्षण नहीं हुआ' || level === 'प्रारम्भिक वर्ग' || level === 'प्राथमिक वर्ग' || level === 'संघ शिक्षा वर्ग / प्रथम वर्ष') {
            pratigyaContainer.style.display = "block";
            if (pratigyaYes.checked || pratigyaNo.checked) {
                pratigyaYes.checked = false;
                pratigyaNo.checked = false;
            }
        } else {
            pratigyaContainer.style.display = "none";
            pratigyaYes.checked = false;
            pratigyaNo.checked = false;
        }
        if (level === 'कोई शिक्षण नहीं हुआ') {
            container.style.display = 'none';
            return;
        }
        container.style.display = "block";
        const fieldsToCreate = [];

        if (level === 'कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष') {
            fieldsToCreate.push(
                { type: 'tritiya', label: 'कार्यकर्ता विकास वर्ग 2 / तृतीय वर्ष <i><small class="text-secondary ">(Third Year) </small></i>' },
                { type: 'dwitiya', label: 'कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष <i><small class="text-secondary ">(Second Year) </small></i>' },
                { type: 'pratham', label: 'संघ शिक्षा वर्ग / प्रथम वर्ष <i><small class="text-secondary ">(First Year) </small></i>' },
                { type: 'prathmik', label: 'प्राथमिक वर्ग <i><small class="text-secondary ">(Primary Year) </small></i>' },
                { type: 'prarambhik', label: 'प्रारम्भिक वर्ग <i><small class="text-secondary ">(Initial Year) </small></i>' },
            );
        } else if (level === 'कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष') {
            fieldsToCreate.push(
                { type: 'dwitiya', label: 'कार्यकर्ता विकास वर्ग 1 / द्वितीय वर्ष <i><small class="text-secondary ">(Second Year) </small></i>' },
                { type: 'pratham', label: 'संघ शिक्षा वर्ग / प्रथम वर्ष <i><small class="text-secondary ">(First Year) </small></i>' },
                { type: 'prathmik', label: 'प्राथमिक वर्ष <i><small class="text-secondary ">(Primary Year) </small></i>' },
                { type: 'prarambhik', label: 'प्रारम्भिक वर्ष <i><small class="text-secondary ">(Initial Year) </small></i>' },
            );
        } else if (level === 'संघ शिक्षा वर्ग / प्रथम वर्ष') {
            fieldsToCreate.push(
                { type: 'pratham', label: 'संघ शिक्षा वर्ग / प्रथम वर्ष <i><small class="text-secondary ">(First Year) </small></i>' },
                { type: 'prathmik', label: 'प्राथमिक वर्ष <i><small class="text-secondary ">(Primary Year) </small></i>' },
                { type: 'prarambhik', label: 'प्रारम्भिक वर्ष (Initial Year)<i><small class="text-secondary ">(Initial Year) </small></i>' },
            );
        } else if (level === 'प्राथमिक वर्ग') {
            fieldsToCreate.push(
                { type: 'prathmik', label: 'प्राथमिक वर्ष <i><small class="text-secondary ">(Primary Year) </small></i>' },
                { type: 'prarambhik', label: 'प्रारम्भिक वर्ष <i><small class="text-secondary ">(Initial Year) </small></i>' }
            );
        } else if (level === 'प्रारम्भिक वर्ग') {
            fieldsToCreate.push(
                { type: 'prarambhik', label: 'प्रारम्भिक वर्ष <i><small class="text-secondary ">(Initial Year) </small></i>' },
            );
        }
        const fieldset = document.createElement("div");
        fieldset.className = "shikshan-fieldset mb-4";

        const row = document.createElement("div");
        row.className = "row";
        let minYear = 1950;
        const currentYear = new Date().getFullYear();
        const formValues = {
            tritiya: "{{ form.tritiya_varsh.value }}" || "",
            dwitiya: "{{ form.dwitiya_varsh.value }}" || "",
            pratham: "{{ form.pratham_varsh.value }}" || "",
            prathmik: "{{ form.prathmik_varsh.value }}" || "",
            prarambhik: "{{ form.prarambhik_varsh.value }}" || "",
        };
        
        const years = [];
        for (let year = currentYear; year >= minYear; year--) {
            years.push(year.toString());
        }

        fieldsToCreate.forEach((field) => {
            const yearCol = document.createElement("div");
            yearCol.className = "col-md-6 mb-3 dropdown";
            yearCol.id = `${field.type}_year-container`;

            const yearLabel = document.createElement("label");
            yearLabel.className = "form-label";
            yearLabel.style.cssText =
            "font-size: 16px !important; font-weight: 600; color: #333;";
            if (field.type !== "prarambhik") {
                yearLabel.innerHTML = `${field.label}<span class="text-danger"> *</span>`;
            } else {
                yearLabel.innerHTML = `${field.label}`;
            }
            yearLabel.htmlFor = `${field.type}_year`;

            yearCol.appendChild(yearLabel);

            const yearSelect = document.createElement("select");
            yearSelect.id = `${field.type}_year`;
            yearSelect.name = `${field.type}_varsh`;
            yearSelect.className = "form-control";

            yearCol.appendChild(yearSelect);

            const yearError = document.createElement("small");
            yearError.className = "text-danger";
            yearError.id = `${field.type}_yearError`;
            yearError.style.cssText = "display: none; font-size: 12px !important;";
            yearError.textContent ="Please select year";
            yearCol.appendChild(yearError);

            yearSelect.addEventListener('change', function () {
                if (yearSelect.value) {
                    hideError(`${field.type}_year`);
                }
            });
            row.appendChild(yearCol);
            fieldset.appendChild(row);
            container.appendChild(fieldset);
            const selectedYear = formValues[field.type];
            if (selectedYear && selectedYear !== "None" && isFirst) {
            newpopulateDropdown(`${field.type}_year`, [selectedYear, years], "example: YYYY");
            } else {
            newpopulateDropdown(`${field.type}_year`, ["", years], "example: YYYY");
            }
        });
        isFirst = false;
    }
   
   
    // ********************************Ghosh jankari  Java Script *************************
  
    // Toggle visibility of containers and reset checkboxes for ghosh_vadak
    document.querySelectorAll('input[name="ghosh_vadak"]').forEach(function (radio) {
        radio.addEventListener('change', function () {
            document.querySelectorAll('#ghoshVadakYes-container input[type="checkbox"]').forEach(function (checkbox) {
                checkbox.checked = false;
                if (['turya', 'swarad', 'nagang', 'gomukh', 'other'].includes(checkbox.id)) {
                    checkbox.parentElement.style.display = 'none';
                }
            });

            document.querySelectorAll('input[name="rachnaye"]').forEach(function (radio) {
                radio.checked = false;
            });
            document.getElementById("shankhShrungOwn-container").style.display = "block";
            document.querySelectorAll('input[name="shankh_shrung_own"]').forEach(function (radio) {
                radio.checked = false;
            })
            document.querySelectorAll('input[name="learn_vadya"]').forEach(function (radio) {
                radio.checked = false;
            });
            if (this.value === 'हाँ') {
                document.getElementById('ghoshVadakYes-container').style.display = 'block';
                document.getElementById('ghoshVadakNo-container').style.display = 'none';
            } else {
                document.getElementById('ghoshVadakYes-container').style.display = 'none';
                document.getElementById('ghoshVadakNo-container').style.display = 'block';
            }
            handleLearnVadya();
        });
    });

   // Function to handle learn_vadya visibility and checkbox reset
    function handleLearnVadya() {
        document.querySelectorAll('input[name="learn_vadya_list"]').forEach(function (checkbox) {
            checkbox.checked = false;
        });
        const selectedLearnVadya = document.querySelector('input[name="learn_vadya"]:checked');
        if (selectedLearnVadya && selectedLearnVadya.value === 'हाँ') {
            document.getElementById('learnVadyaList').style.display = 'block';
            document.getElementById('learnVadyaList-container').style.display = 'block';       
        } else {
            document.getElementById('learnVadyaList').style.display = 'none';
            document.getElementById('learnVadyaList-container').style.display = 'none';
        }
    }
    // Add event listeners for learn_vadya
    document.querySelectorAll('input[name="learn_vadya"]').forEach(function (radio) {
        radio.addEventListener('change', handleLearnVadya);
    });
    
    // Reusable function to toggle visibility and reset dependent checkboxes
    function toggleDependentCheckboxes(checkboxId, dependentIds) {
        const mainCheckbox = document.getElementById(checkboxId);
        if (!mainCheckbox) {
            return;
        }
        mainCheckbox.addEventListener('change', function () {
            dependentIds.forEach(function (id) {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.parentElement.style.display = this.checked ? 'block' : 'none';
                    if (!this.checked) {
                        checkbox.checked = false; 
                    }
                } 
            }, this);
        });
    }

    // Apply toggle functionality for shrung and learnShrung
    toggleDependentCheckboxes('shrung', ['turya', 'swarad', 'nagang', 'gomukh', 'other']);
    toggleDependentCheckboxes('learnShrung', ['learnTurya', 'learnSwarad', 'learnNagang', 'learnGomukh', 'learnOther']);
    document.getElementById('shrung').addEventListener('change', function () {
        const container = document.getElementById("shankhShrungOwn-container");
        if(this.checked){
            container.style.display = "none";
        }else{
            container.style.display = "block";
        }
        const checkboxesToShow = ['turya', 'swarad', 'nagang', 'gomukh', 'other'];
        checkboxesToShow.forEach(function (id) {
            const checkbox = document.getElementById(id);
            if (checkbox) {
                checkbox.parentElement.style.display = this.checked ? 'block' : 'none';
                if (!this.checked) {
                    checkbox.checked = false;
                }
            } 
        }, this);
    });
    //basic js
    const dobInput = document.getElementById('dob');
    function openDatePicker(event) {
        if (dobInput) {
            if (typeof dobInput.showPicker === 'function') {
                dobInput.showPicker();
            } else {
                dobInput.focus();
            }
        }
    }
    function setMaxDate() {
        const today = new Date();
        const year = today.getFullYear()- 10;
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        const formattedDate = `${year}-${month}-${day}`;
        if (dobInput) {
            dobInput.setAttribute('max', formattedDate); 
        }
    }
    if (dobInput) {
        dobInput.addEventListener('focus', openDatePicker);  
        dobInput.addEventListener('click', openDatePicker); 
        setMaxDate();
    }
    rssAssociation = document.querySelector('input[name="rss_association"]:checked')?.value;
    let referralCode = document.getElementById("referralCode");  
    if(rssAssociation === "विविध संगठन"){
        referralCode.value = "1925";
    }

    document.getElementById("referralCode").addEventListener("input", function () {
        const referralCodeError = document.getElementById("referralCodeError");
        this.value = this.value.replace(/[^a-zA-Z0-9]/g, '');
        if (!(/^[A-Z]+$/i.test(this.value) || /^[0-9]+$/.test(this.value))) {
            referralCodeError.style.display = "block"; 
        } else {
            referralCodeError.style.display = "none"; 
        }
    });
   
    function populateDropdown(field, options, placeholder) {
        const dropdown = document.getElementById(field);
        dropdown.innerHTML = `<option value="" disabled selected>${placeholder}</option>`;

        const addOption = (value, text = value) => {
            const option = document.createElement("option");
            const mappedValue = fieldToHindiMapping[value] || value;
            option.value = mappedValue;
            option.textContent = mappedValue;
            dropdown.appendChild(option);
        };

        const fieldConfigs = {
            prant: {
                defaultOption: options[0],
                additionalOptions: Array.isArray(options[1]) ? options[1] : [options[1]]
                    .filter(opt => opt && opt !== options[0])
            },
            vibhag: {
                defaultOption: options[0],
                additionalOptions: (Array.isArray(options[1]) ? options[1] : [options[1]])
                    .flatMap(prant => mappings.prantToVibhag[prant] || [])
                    .filter(opt => opt && opt !== options[0])
            },
            jila: {
                defaultOption: options[0],
                additionalOptions: (Array.isArray(options[1]) ? options[1] : [options[1]])
                    .flatMap(vibhag => mappings.VibhagToJila[vibhag] || [])
                    .filter(opt => opt && opt !== options[0])
            },
            ekai_nagar: {
                defaultOption: options[0],
                additionalOptions: (mappings.pincodeToNagar[options[1]] || [])
                    .filter(opt => opt && opt !== options[0])
            }
        };

        if (fieldConfigs[field]) {
            const { defaultOption, additionalOptions } = fieldConfigs[field];
            if (defaultOption) {
                const option = document.createElement("option");
                const mappedValue = fieldToHindiMapping[defaultOption] || defaultOption;
                option.value = mappedValue;
                option.textContent = mappedValue;
                option.selected = true;
                dropdown.appendChild(option);
            }
            additionalOptions.forEach(addOption);
            return;
        }
        const validOptions = Array.isArray(options) ? options : [options];
        validOptions.filter(opt => opt && opt.length > 0).forEach(addOption);
    }


    function resetDropdowns(field) {
        console.log(field);
        const resetMappings = {
            referralCode: ["profession", "pincode", "prant", "vibhag", "jila", "ekai_nagar", "mandal", "basti", "sakha_milan", "dayitva", "state", "ekai"],
            pincode: ["nagar", "ekai_nagar", "mandal", "basti", "sakha_milan", "state", "ekai", "dayitva", "prant", "vibhag", "jila"],
            profession:["teacherType","socialWorkArea","businessType","industrialistType","studentType", "university","institute","collegeStudentType","course","professionType","professionSubType"],
            address_pincode: ["address_nagar", "address_state"],
            ekai: ["prant", "vibhag", "jila", "ekai_nagar", "mandal", "basti", "sakha_milan", "sakha_milanCheckbox", "dayitva"],
            nagar: ["ekai", "prant", "vibhag", "jila", "ekai_nagar", "upbasti", "dayitva"],
            mandal: ["mandal", "dayitva"],
            basti: ["basti", "dayitva"],
            sakha_milan: ["sakha_milan", "sakha_milanCheckbox", "dayitva"],
            ekai_nagar: ["ekai_nagar", "dayitva"],
            // vividhSangathan: ["pincode", "dayitva", "nagar", "state"],
            responsibility:["pincode"],
            rssAssociation:["responsibility_yes_no","sakha_milan2","activity","vividhSangathan","socialInterests","pincode"]
        };
        function resetDropdown(dropdownId) {
            if (dropdownId === "pincode") {
                document.getElementById("pincode").value = "";
                toggleVisibility("pincode");
            } else if (dropdownId === "sakha_milanCheckbox") {
                let yesRadio = document.getElementById("sakha_milanCheckboxYes");
                let noRadio = document.getElementById("sakha_milanCheckboxNo");
                if (yesRadio.checked || noRadio.checked) {
                    yesRadio.checked = false;
                    noRadio.checked = false;
                }               
            }else if( dropdownId === "activity" || dropdownId === "collegeStudentType"|| dropdownId === "studentType" || dropdownId ==="teacherType" || dropdownId === "socialWorkArea" || dropdownId === "businessType"|| dropdownId === "industrialistType"){
                const dropdown = document.getElementById(dropdownId);
                dropdown.value = "";
            }else if(dropdownId === "responsibility_yes_no"){
                const radios = document.getElementsByName(dropdownId);
                radios.forEach(radio => {
                    radio.checked = false;
                });
            }else if (dropdownId === "socialInterests") {
                const checkboxes = ["shiksha", "aarthik", "dharmik", "seva", "swasthya", "samajik", "sanskritik", "vaicharik", "suraksha", "media"];
                checkboxes.forEach(id => {
                    document.getElementById(id).checked = false;
                })
            }else{
                populateDropdown(dropdownId, [], dropdownId);
            }
        }
        if (resetMappings[field]) {
            resetMappings[field].forEach(resetDropdown);
        }
    }


    
    function handleDropdownChange(field, options) {
        resetDropdowns(field);
        toggleVisibility(field);
        const selectedValue = document.getElementById(field).value;
        const referralCode = document.getElementById("referralCode").value.trim();
        const responsibilityYes = document.querySelector('input[name="responsibility_yes_no"]:checked')?.value;
        const rssAssociation = document.querySelector('input[name="rss_association"]:checked')?.value;
        if ((referralCode === "1925" && responsibilityYes === "हाँ")|| (rssAssociation === "विविध संगठन" && responsibilityYes === "हाँ")) {
            document.getElementById("ekai-container").style.display = "block";
        }
        populateDropdown("ekai", selectedValue ? options : [], "इकाई");
    }

    document.getElementById("state").addEventListener("change", function () {
        handleDropdownChange("state", ["akhilbhartiya", "chetra"]);
    });

    document.getElementById("upbasti").addEventListener("change", function () {
        const responsibilityYes = document.querySelector('input[name="responsibility_yes_no"]:checked')?.value;
        const rssAssociation = document.querySelector('input[name="rss_association"]:checked')?.value;
        if (rssAssociation === "विविध संगठन" && responsibilityYes === "हाँ") {
            handleDropdownChange("upbasti", ["अखिलभारतीय", "क्षेत्र", "प्रांत", "विभाग", "जिला", "नगर", "मंडल", "बस्ती"]);
        }
        else {
            handleDropdownChange("upbasti", ["अखिलभारतीय", "क्षेत्र", "प्रांत", "विभाग", "जिला", "नगर", "मंडल", "बस्ती", "शाखा / मिलन"]);
        }
    });

    document.getElementById("nagar").addEventListener("change", function () {
        resetDropdowns("nagar");
        toggleVisibility("nagar");
    });

    function toggleVisibility(field) {
        // List of all containers to reset
        const allContainers = [
            "prant-container", "vibhag-container", "jila-container", "ekai_nagar-container", "mandal-container", "basti-container",
            "sakha_milanCheckbox-container", "sakha_milan-container", "dayitva-container", "state-container", "nagar-container", "ekai-container", "upbasti-container"
        ];

        // Hide all containers
        if (field === "address_pincode") {
            const allContainers = ["address_state-container", "address_nagar-container"];
            allContainers.forEach(id => document.getElementById(id).style.display = "none");
        }else if(field === "profession"){
            const allContainers=["studentType-container","teacherType-container", "university-container","institute-container","collegeStudentType-container", "course-container","socialWorkArea-container","businessType-container", "industrialistType-container","professionType-container","professionSubType-container"];
            allContainers.forEach(id => document.getElementById(id).style.display = "none");
        } else {
            allContainers.forEach(id => document.getElementById(id).style.display = "none");
        }

        const referralCode = document.getElementById("referralCode").value.trim();
        const selectedPincode = document.getElementById("pincode").value.trim();
        const selectedAddressPincode = document.getElementById("address_pincode").value.trim();

        // Handle Pincode Cases
        if (field === "pincode" && selectedPincode.length === 6) {
            toggleElement(mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container");
            populateDropdown(
                mappings.delhiPincodes.includes(selectedPincode) ? "nagar" : "state",
                mappings.delhiPincodes.includes(selectedPincode) ? mappings.pincodeToNagar[selectedPincode] || [] : mappings.pincodeToState[selectedPincode] || [],
                mappings.delhiPincodes.includes(selectedPincode) ? "नगर" : "राज्य"
            );
            return;
        }
        // Handle Address Pincode Cases
        if (field === "address_pincode" && selectedAddressPincode.length === 6) {
            toggleElement(mappings.delhiPincodes.includes(selectedAddressPincode) ? "address_nagar-container" : "address_state-container");
            populateDropdown(
                mappings.delhiPincodes.includes(selectedAddressPincode) ? "address_nagar" : "address_state",
                mappings.delhiPincodes.includes(selectedAddressPincode) ? mappings.pincodeToNagar[selectedAddressPincode] || [] : mappings.pincodeToState[selectedAddressPincode] || [],
                mappings.delhiPincodes.includes(selectedAddressPincode) ? "निवास का नगर" : "राज्य"
            );
            return;
        }
        if(field === "profession"){
            const professionValue = document.getElementById("profession").value;
            if(professionValue === "स्कूल-विद्यार्थी"){
                toggleElement("studentType-container");
            }else if(professionValue === 'अध्यापक'){
                toggleElement("teacherType-container");
            }else if (professionValue === 'कॉलेज-विद्यार्थी' || professionValue === "प्राध्यापक") {
                toggleElement("university-container");
                toggleElement("institute-container");
                toggleElement("collegeStudentType-container");
                toggleElement("course-container");
                // toggleElement("stream-container");
            }else if(professionValue === 'सामाजिक संस्थान में कार्यरत'){
                toggleElement("socialWorkArea-container");
            }else if(professionValue === 'व्यवसायी'){
                toggleElement("businessType-container");
            }else if(professionValue === 'उद्योगपति'){
                toggleElement("industrialistType-container");
            }else if(professionValue === 'प्रोफेशनल'){
                toggleElement("professionType-container");
                toggleElement("professionSubType-container");
            }
            return;
        }
        if (field === "nagar") {
            toggleElement("nagar-container");
            let selectedNagar = document.getElementById("nagar").value;
            let options = [];
            let mandals = mappings.nagarToMandal[selectedNagar] || [];
            let bastis = mandals.flatMap(mandal => mappings.mandalToBasti[mandal] || []);
            options = bastis.flatMap(basti => mappings.bastiToUpbasti[basti] || []);
            populateDropdown("upbasti", options, "उपबस्ती");
            toggleElement("upbasti-container");
            return;
        }
        if (field === "upbasti") {
            toggleElement("upbasti-container");
            toggleElement("nagar-container");
            return;
        }
        if (field === "ekai") {
            let selectedEkai = document.getElementById("ekai").value;
            const responsibilityYes = document.querySelector('input[name="responsibility_yes_no"]:checked')?.value;
            const rssAssociation = document.querySelector('input[name="rss_association"]:checked')?.value;
            selectedEkai = `${hindiToEnglishMapping[selectedEkai]}`;
            toggleElement(mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container");
            toggleElement("ekai-container");
            toggleElement("dayitva-container");
            if (rssAssociation === "मिलन" && responsibilityYes === "हाँ") {
                toggleElement("sakha_milanCheckbox-container");
            }
            toggleElement("sakha_milan-container");
            if (mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container" === "nagar-container") {
                toggleElement("upbasti-container");
            }
            return;
        }

        // Define toggle conditions for each field
        const toggleMap = {
            ekai: referralCode === "1925" ? ["ekai-container"] : [],
            state: ["state-container", referralCode === "1925" ? "ekai-container" : null].filter(Boolean),
            address_state: ["address_state-container"]
        };

        // Handle ekai-specific conditions
        if (field === "dayitva" && referralCode === "1925") {
            if (mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container" === "nagar-container") {
                toggleElement("upbasti-container");
            }
            let ekai = document.getElementById("ekai").value;
            ekai = `${hindiToEnglishMapping[ekai]}`;
            toggleElement("dayitva-container");
            const ekaiMappings = {
                "prant": ["nagar-container", "ekai-container", "prant-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "vibhag": ["nagar-container", "ekai-container", "vibhag-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "jila": ["nagar-container", "ekai-container", "jila-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "ekai_nagar": ["nagar-container", "ekai-container", "ekai_nagar-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "akhilbhartiya": [mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container", "ekai-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "chetra": [mappings.delhiPincodes.includes(selectedPincode) ? "nagar-container" : "state-container", "ekai-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "mandal": ["nagar-container", "ekai-container", "mandal-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "basti": ["nagar-container", "ekai-container", "basti-container","sakha_milan-container", "sakha_milanCheckbox-container"],
                "sakha_milan": ["nagar-container", "ekai-container", "sakha_milan-container", "sakha_milanCheckbox-container"],
            };
            toggleMap[field] = ekaiMappings[ekai] || [];
        }
        // Toggle necessary elements
        (toggleMap[field] || []).forEach(toggleElement);
    }

    function toggleElement(elementId) {
        const element = document.getElementById(elementId);
        if (element.style.display === "none" || element.style.display === "") {
            element.style.display = "block";
        } else {
            element.style.display = "none";
        }
    }

    document.getElementById("dayitva").addEventListener("change", function () {
        toggleVisibility("dayitva");
    });

     //profession change handle
    document.getElementById('profession').addEventListener('change', function () {
        resetDropdowns("profession");
        toggleVisibility("profession");
        const professionValue = this.value;
        if(professionValue === 'कॉलेज-विद्यार्थी' || professionValue === "प्राध्यापक") {
            populateDropdown("university", Object.keys(mappings.collageAffiliated), "विश्वविद्यालय");
            populateDropdown("institute", Object.values(mappings.collageAffiliated).flat(), "संस्थान");
            populateDropdown("course", Object.keys(mappings.category_name), "कोर्स");
            // populateDropdown("stream", Object.values(mappings.category_name).flat(), "स्ट्रीम");
        }else if(professionValue === 'प्रोफेशनल'){
            populateDropdown("professionType", Object.keys(professionals), "प्रोफेशनल");
            populateDropdown("professionSubType", Object.values(professionals).flat(), "प्रोफेशनल प्रकार");
        }
    });

    document.getElementById("ekai").addEventListener("change", function () {
        resetDropdowns("ekai");
        const rssAssociation = document.querySelector('input[name="rss_association"]:checked')?.value;
        if (rssAssociation === "विविध संगठन" ) return;
        toggleVisibility("ekai");
        let selectedEkai = `${hindiToEnglishMapping[this.value]}`;
        let selectedNagar = document.getElementById("nagar").value;
        let selectedPincode = document.getElementById("pincode").value;
        let selectedUpbasti = document.getElementById("upbasti").value;

        let selectedJila = Object.keys(mappings.jilaToNagar).find(jila =>
            mappings.jilaToNagar[jila].includes(selectedNagar)
        );

        let selectedVibhag = Object.keys(mappings.VibhagToJila).find(vibhag =>
            mappings.VibhagToJila[vibhag].includes(selectedJila)
        );

        let selectedPrant = Object.keys(mappings.prantToVibhag).find(prant =>
            mappings.prantToVibhag[prant].includes(selectedVibhag)
        );

        let selectedNagars = mappings.pincodeToNagar[selectedPincode] || [];

        const selectedJilas = Object.keys(mappings.jilaToNagar).filter(jila =>
            mappings.jilaToNagar[jila].some(nagar => selectedNagars.includes(nagar))
        );
        const selectedVibhags = Object.keys(mappings.VibhagToJila).filter(vibhag =>
            mappings.VibhagToJila[vibhag].some(jila => selectedJilas.includes(jila))
        );
        const selectedPrants = Object.keys(mappings.prantToVibhag).filter(prant =>
            mappings.prantToVibhag[prant].some(vibhag => selectedVibhags.includes(vibhag))
        );


        if (selectedEkai === "prant") {

            populateDropdown("prant", [selectedPrant], "प्रांत");
        } else if (selectedEkai === "vibhag") {
            populateDropdown("vibhag", [selectedVibhag, selectedPrant], "विभाग");
        } else if (selectedEkai === "jila") {
            populateDropdown("jila", [selectedJila, selectedVibhags], "जिला");
        }
        else if (selectedEkai === "ekai_nagar") {
            populateDropdown("ekai_nagar", [selectedNagar, selectedPincode], "नगर");
        } else if (["mandal", "basti", "sakha_milan"].includes(selectedEkai)) {
            let options = [];
            options = mappings.pincodeToNagar[selectedPincode] || [];
            if (selectedEkai === "mandal") {
                options = mappings.nagarToMandal[selectedNagar] || [];
            } else if (selectedEkai === "basti") {
                let mandals = mappings.nagarToMandal[selectedNagar] || [];
                options = mandals.flatMap(mandal => mappings.mandalToBasti[mandal] || []);
            } else if (selectedEkai === "sakha_milan") {
                options = sakha_milan;
            }
            populateDropdown(selectedEkai, options, `${fieldToHindiMapping[selectedEkai]}`);
        }
        populateDropdown("sakha_milan", sakha_milan, `${fieldToHindiMapping["sakha_milan"]}`);
        populateDayitva(selectedEkai);
    });
    // Populate dayitva dropdown
    function populateDayitva(selectedEkai) {
        if (selectedEkai === "nagar") {
            populateDropdown("dayitva", mappings.dayitvaMapping["ekai_nagar"] || [], "दायित्व");
        } else if (selectedEkai === "sakha_milan") {
            populateDropdown("dayitva", mappings.dayitvaMapping["shakha"] || [], "दायित्व");
        } else {
            populateDropdown("dayitva", mappings.dayitvaMapping[selectedEkai] || [], "दायित्व");
        }
    }

     // Handle responsibility radio buttons
    document.querySelectorAll('input[name="rss_association"]').forEach(radio => {
        radio.addEventListener("change", function () {
            resetDropdowns("rssAssociation");
            toggleVisibility("rssAssociation");
            const selectedValue = document.querySelector('input[name="rss_association"]:checked')?.value;
            console.log(selectedValue);
            let referralCode = document.getElementById("referralCode");
            referralCode.value = "1925";
            document.getElementById("responsibility-container").style.display = "block";
            document.getElementById("pincode-container").style.display = "none";
            if(selectedValue === "शाखा" || selectedValue === "मिलन"){
                document.getElementById("sakha_milan2-container").style.display = "block";
                document.getElementById("activity-container").style.display = "none";
                document.getElementById("vividhSangathan-container").style.display = "none";
                document.getElementById("socialInterests-container").style.display = "none";
                populateDropdown("sakha_milan2", sakha_milan, `${fieldToHindiMapping["sakha_milan"]}`);
                document.getElementById("dayitva").value = "स्वयंसेवक";
                document.getElementById("ekai").value = "शाखा / मिलन";
            }else if(selectedValue === "गतिविधि"){
                document.getElementById("sakha_milan2-container").style.display = "none";
                document.getElementById("activity-container").style.display = "block";
                document.getElementById("vividhSangathan-container").style.display = "none";
                document.getElementById("socialInterests-container").style.display = "none";
                document.getElementById("dayitva").value = "गतिविधि";
                document.getElementById("ekai").value = "बस्ती";
            }else if(selectedValue === "विविध संगठन"){
                document.getElementById("sakha_milan2-container").style.display = "none";
                document.getElementById("activity-container").style.display = "none";
                document.getElementById("vividhSangathan-container").style.display = "block";
                document.getElementById("socialInterests-container").style.display = "none";
                const options = ["अखिल भारतीय विद्यार्थी परिषद", "विद्याभारती", "भारतीय शिक्षण मंडल","अखिल भारतीय शैक्षिक महासंघ", "संस्कृत भारती", "शिक्षा संस्कृति उत्थान न्यास","वनवासी कल्याण आश्रम", "विश्व हिन्दू परिषद्", "भारतीय जनता पार्टी","राष्ट्रीय सिक्ख संगत", "क्रीडा भारती", "संस्कार भारती", "सक्षम","आरोग्य भारती", "एन्. एम्. ओ. (नैशनल मैडिकल आर्गेनाइजेशन)"];
                populateDropdown("vividhSangathan", options, fieldToHindiMapping["vividhSangathan"]);
                referralCode.value = "";
            }else{
                document.getElementById("sakha_milan2-container").style.display = "none";
                document.getElementById("activity-container").style.display = "none";
                document.getElementById("vividhSangathan-container").style.display = "none";
                document.getElementById("socialInterests-container").style.display = "block";
                document.getElementById("responsibility-container").style.display = "none";
                document.getElementById("pincode-container").style.display = "block";
                document.getElementById("dayitva").value = "JOIN RSS/सज्जन शक्ति";
                document.getElementById("ekai").value = "बस्ती";
            }
            
        });
    });

    // Handle responsibility radio buttons
    document.querySelectorAll('input[name="responsibility_yes_no"]').forEach(radio => {
        radio.addEventListener("change", function () {
            resetDropdowns("responsibility");
            document.getElementById("pincode-container").style.display = "block";
        });
    });
    
    document.getElementById("vividhSangathan").addEventListener("change", function () {
        resetDropdowns("vividhSangathan");
        toggleVisibility("vividhSangathan");
        const selectedValue = document.getElementById("vividhSangathan").value;
        const referralCodeField = document.getElementById("referralCode");
        if (selectedValue && sangathanToReferralCode[selectedValue]) {
            referralCodeField.value = sangathanToReferralCode[selectedValue];
        } else {
            referralCodeField.value = "0000"; 
        }
    });

    // Handle referral code change
    document.getElementById("referralCode").addEventListener("change", function () {
        resetDropdowns("referralCode");
        const referralCode = this.value.trim();
        const selectedValue = document.querySelector('input[name="vividhsangathan_yes_no"]:checked')?.value;
        if (selectedValue === "हाँ") {
            this.value = "";
        }else {
            this.value = "1925";
        }
        document.getElementById("vividhSangathan-container").style.display = selectedValue === "हाँ"  ? "block" : "none";

        const professionDropdown = document.getElementById("profession");
        const pincodeField = document.getElementById("pincode");
        pincodeField.value = "";
        const professionOptions = referralCode === "1925" ? ["स्कूल-विद्यार्थी", "कॉलेज-विद्यार्थी", "अध्यापक", "प्राध्यापक", "कर्मचारी (सरकारी)", "कर्मचारी (अन्य)", "व्यवसायी", "उद्योगपति",
            "प्रोफेशनल", "सेवा-निवृत्त", "गृहिणी", "श्रमिक", "कृषक (किसान)", "प्रचारक", "विस्तारक", "पूर्णकालिक"] : 
            ["स्कूल-विद्यार्थी", "कॉलेज-विद्यार्थी", "अध्यापक", "प्राध्यापक","कर्मचारी (सरकारी)", "कर्मचारी (अन्य)", "व्यवसायी", "उद्योगपति","प्रोफेशनल", "सेवा-निवृत्त", "गृहिणी", "श्रमिक", "कृषक (किसान)"
        ];
        populateDropdown("profession", professionOptions, "श्रेणी");

        let matchedSangathan = Object.keys(sangathanToReferralCode).find(
            (key) => sangathanToReferralCode[key] === referralCode
        );
        if (matchedSangathan) {
            document.getElementById("vividhSangathan").value = matchedSangathan;
        } else {
            document.getElementById("vividhSangathan").innerHTML ='<option value="" disabled selected>विविध संगठन</option>';
            Object.keys(sangathanToReferralCode).forEach(sangathanName => {
                const option = document.createElement("option");
                option.value = sangathanName;
                option.textContent = sangathanName;
                document.getElementById("vividhSangathan").appendChild(option);
            });
        }
    });

    const cardFields = {
        card_body_1: {
            fields: {
                name: { type: 'text', required: true, pattern: /^[a-zA-Z\u0900-\u097F\s]+$/ },
                lastName: { type: 'text', required: true, pattern: /^[a-zA-Z\u0900-\u097F\s]+$/ },
                phone: { type: 'text', required: true },
                confirmPhone: { type: 'text', required: true },
                // email: { type: 'text', required: true },
                // confirmEmail: { type: 'text', required: true },
                dob: { type: 'text', required: true },
                currentAddress: { type: 'text', required: true },
                permanentAddress: { type: 'text', required: true },
                address_pincode: { type: 'text', required: true, pattern: /^\d{6}$/ },
                blood_group: { type: 'select', required: true },
                profession: { type: 'select', required: true },
                studentType:{ type:'select', required:true },
                university:{ type:'select', required:true},
                institute:{ type:'select', required:true},
                course:{ type:'select', required:true},
                collegeStudentType:{ type:'select', required:true },
                socialWorkArea: { type:'select', required:true },
                teacherType: { type:'select', required:true },
                professionType: { type:'select', required:true },
                professionSubType:{ type:'select', required:true },
                industrialistType: { type:'select', required:true },
                businessType: { type:'select', required:true },
                address_nagar: { type: 'select', required: true },
                address_state: { type: 'select', required: true },
            },
            specialCases: {
                gender: { type: 'radio', required: true, selector: 'input[name="gender"]:checked', errorId: 'genderError',errorMessage: 'Please select a option.' },
            }
        },
        card_body_2: {
            fields: {
                pincode: { type: 'text', required: true, pattern: /^\d{6}$/ },
                nagar: { type: 'select', required: true },
                state: { type: 'select', required: true },
                sakha_milan2: { type: 'select', required: true },
                activity: { type: 'select', required: true },
                upbasti: { type: 'select', required: true },
                ekai: { type: 'select', required: true },
                dayitva: { type: 'select', required: true },
                prant: { type: 'select', required: true },
                vibhag: { type: 'select', required: true },
                jila: { type: 'select', required: true },
                ekai_nagar: { type: 'select', required: true },
                basti: { type: 'select', required: true },
                mandal: { type: 'select', required: true },
                sakha_milan: { type: 'select', required: true },
                vividhSangathan: { type: 'select', required: true }
            },
            specialCases: {
                rssAssociation: {type: 'radio',required: true,selector: 'input[name="rss_association"]:checked',errorId: 'rssAssociationError',errorMessage: 'Please select a option'},
                responsibility: {type: 'radio',required: true,selector: 'input[name="responsibility_yes_no"]:checked',  errorId: 'responsibilityError', errorMessage: 'Please select an option',},
                // vividhCheckbox: {type: 'radio',required: true, selector: 'input[name="vividhsangathan_yes_no"]:checked', errorId: 'vividhCheckboxError', errorMessage: 'Please select an option',},
                sakha_milanCheckbox: {type: 'radio',required: true, selector: 'input[name="ekai_milaan"]:checked', errorId: 'sakha_milanCheckboxError',errorMessage: 'Please select an option',},
                vividhSangathan: {type: 'conditionalCheckbox', checkboxSelector: 'input[name="vividhsangathan_yes_no"]:checked', errorId: 'vividhCheckboxError',  errorMessage: 'Please select an option', conditionValue: 'हाँ'},
                socialInterests: {type: 'checkbox', required: true,  selector: '#socialInterests-container input[type="checkbox"]:checked', errorId: 'socialInterestsError',errorMessage: 'Please select at least one option'}
            }
        },
        card_body_3: {
            fields: {
                sangh_shikshan_level: { type: 'select', required: true },
                prathmik_year: { type: 'select', required: true },
                pratham_year: { type: 'select', required: true },
                dwitiya_year: { type: 'select', required: true },
                tritiya_year: { type: 'select', required: true },
                ghosh_vadak: { type: 'radio', required: true, selector: 'input[name="ghosh_vadak"]:checked' }
            },
            specialCases: {
                pratigyaCheckbox: {type: 'radio',required: true, selector: 'input[name="pratigya"]:checked', errorId: 'pratigyaCheckboxError',errorMessage: 'Please select an option',}
            }
        }
    };

    const cards = [];
    function validateFields(fields, specialCases = {}, cardId) {
        let valid = true;

        for (const [fieldId, config] of Object.entries(fields)) {
            const element = document.getElementById(fieldId);
            const errorElement = document.getElementById(`${fieldId}Error`);

            if (!element || element.style.display === 'none' || element.parentElement.style.display === 'none') {
                continue;
            }

            if (config.type === 'text') {
                const value = element.value.trim();
                if ((config.required || isFieldVisible(element.id)) && !value) {
                    showErrors(errorElement, 'This field is required');
                    valid = false;
                } else if (config.pattern && !config.pattern.test(value)) {
                    showErrors(errorElement, 'Please enter a valid value');
                    valid = false;
                } else {
                    hideErrors(errorElement);
                }
            } else if (config.type === 'select') {
                if ((config.required || isFieldVisible(element.id)) && (!element.value || element.value === '')) {
                    showErrors(errorElement, 'Please select an option');
                    valid = false;
                } else {
                    hideErrors(errorElement);
                }
            }
            else if (config.type === 'radio') {
                const selectedOption = document.querySelector(config.selector);
                if ((config.required || isFieldVisible(fieldId)) && !selectedOption) {
                    showErrors(errorElement, 'Please select an option');
                    valid = false;
                } else {
                    hideErrors(errorElement);
                }
            }
        }

        for (const [key, config] of Object.entries(specialCases)) {
            if (config.type === 'radio') {
                const selected = document.querySelector(config.selector);
                if (!selected && isFieldVisible(key)) {
                    showErrors(document.getElementById(config.errorId), config.errorMessage);
                    valid = false;
                } else {
                    hideErrors(document.getElementById(config.errorId));
                }
            }else if (config.type === 'checkbox') {
                const checkboxes = document.querySelectorAll(config.selector);
                const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
                if (!anyChecked && isFieldVisible('socialInterests')) {
                    showErrors(document.getElementById(config.errorId), config.errorMessage);
                    valid = false;
                } else {
                    hideErrors(document.getElementById(config.errorId));
                }
            } else if (config.type === 'conditionalSelect') {
                const checkbox = document.getElementById(config.checkboxId);
                if (checkbox && checkbox.checked) {
                    const select = document.getElementById(config.fieldId);
                    if (!select.value) {
                        showErrors(document.getElementById(config.errorId), config.errorMessage);
                        valid = false;
                    } else {
                        hideErrors(document.getElementById(config.errorId));
                    }
                }
            } else if (config.type === 'dynamicYears') {
                const container = document.getElementById(config.containerId);
                if (container.style.display !== 'none') {
                    const inputs = container.querySelectorAll(config.inputSelector);
                    inputs.forEach(input => {
                        if (!input.value) {
                            showErrors(document.getElementById(`${input.name}Error`), config.errorMessage);
                            valid = false;
                        } else {
                            hideErrors(document.getElementById(`${input.name}Error`));
                        }
                    });
                }
            } else if (config.type === 'conditionalCheckbox') {
                const radio = document.querySelector(config.radioSelector);
                if (radio && radio.value === config.conditionValue) {
                    const checkboxes = document.querySelectorAll(config.checkboxSelector);
                    const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
                    if (!anyChecked) {
                        showErrors(document.getElementById(config.errorId), config.errorMessage);
                        valid = false;
                    } else {
                        hideErrors(document.getElementById(config.errorId));
                    }
                }
            }
        }

        const cardElement = document.querySelector(`#${cardId}`).parentElement;
        cardElement.classList.remove('border-success', 'border-danger');
        cardElement.classList.add(valid ? 'border-success' : 'border-danger');

        const cardHeader = cardElement.querySelector('.card-header');
        cardHeader.classList.remove('bg-success', 'bg-danger');
        if (valid) {
            cardHeader.classList.add('bg-success', 'text-white');
        }else{
            cardHeader.classList.remove('text-white');
        }

        return valid;
    }
    
    function validateForm(event) {
        event.preventDefault(); 
        let isValid = true;
        let firstInvalidCard = null;
        const cardIds = ["card_body_1", "card_body_2", "card_body_3"];

        cardIds.forEach(cardId => {
        validateFields(cardFields[cardId].fields, cardFields[cardId].specialCases, cardId);
        });
        for (const [cardId] of Object.entries(cardFields)) {
            const cardElement = document.querySelector(`#${cardId}`).parentElement;
            const isInvalid = cardElement.classList.contains('border-success');
            if (!isInvalid) {
                isValid = false;
                if (!firstInvalidCard) {
                    firstInvalidCard = cardId;
                }
                const errorMessage = document.querySelector(`#${cardId}Error`);
                showErrors(errorMessage, "Please complete all required fields in this section");
                    setTimeout(() => {
                        hideErrors(errorMessage);
                    }, 5000);
                const card = cards.find(c => c.cardId === cardId);
                if (card && card.cardBody.style.height === '0px') {
                    gsap.to(card.cardBody, {
                        height: "auto",
                        padding: "1rem",
                        opacity: 1,
                        duration: 0.8,
                        ease: "power2.inOut"
                    });
                    gsap.to(card.toggleIcon, {
                        opacity: 0,
                        duration: 0.3,
                        ease: "power2.inOut",
                        onComplete: () => {
                            card.toggleIcon.classList.remove('fa-plus');
                            card.toggleIcon.classList.add('fa-minus');
                            gsap.to(card.toggleIcon, { opacity: 1, duration: 0.15, ease: "power2.inOut" });
                        }
                    });
                }
            }
        }
        if (isValid) { 
            openModal();
        } else {
            if (firstInvalidCard) {
                const cardElement = document.querySelector(`#${firstInvalidCard}`).parentElement;
                cardElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                const errorMessage = document.querySelector(`#${firstInvalidCard}Error`);
                showErrors(errorMessage, "Please complete all required fields in this section");
            }
        }
    
        return isValid;
    }

    function showErrors(errorElement, message) {
        if (errorElement) {
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
    }

    function hideErrors(errorElement) {
        if (errorElement) {
            errorElement.style.display = 'none';
        }
    }

    function setupCardToggle(headerSelector, bodySelector, cardId) {
        const header = document.querySelector(headerSelector);
        const cardBody = document.querySelector(bodySelector);
        const cardContainer = document.querySelector(bodySelector);
        const toggleIcon = header ? header.querySelector(".toggle-icon i") : null;
        const nextButton = cardContainer ? cardContainer.querySelector(".next-btn") : null; 
    
        cards.push({ header, cardBody, toggleIcon, cardId });
    
        if (cardId === 'card_body_1') {
            gsap.set(cardBody, { height: "auto", padding: "1rem", opacity: 1 });
            if (toggleIcon) {
                toggleIcon.classList.remove('fa-plus');
                toggleIcon.classList.add('fa-minus');
            }
            validateFields(cardFields[cardId].fields, cardFields[cardId].specialCases, cardId);
        } else {
            gsap.set(cardBody, { height: 0, padding: 0, opacity: 0 });
        }
    
        // Function to toggle a specific card
        const toggleCard = (targetCard) => {
            if (targetCard.header.classList.contains('disabled')) {
                return;
            }
            const isOpen = targetCard.cardBody.style.height && targetCard.cardBody.style.height !== '0px';
            cards.forEach(card => {
                if (card !== targetCard && card.cardBody.style.height !== '0px') {
                    gsap.to(card.cardBody, {
                        height: 0,
                        padding: 0,
                        opacity: 0,
                        duration: 0.8,
                        ease: "power2.inOut"
                    });
                    gsap.to(card.toggleIcon, {
                        opacity: 0,
                        duration: 0.15,
                        ease: "power2.inOut",
                        onComplete: () => {
                            card.toggleIcon.classList.remove('fa-minus');
                            card.toggleIcon.classList.add('fa-plus');
                            gsap.to(card.toggleIcon, { opacity: 1, duration: 0.15, ease: "power2.inOut" });
                        }
                    });
                }
            });
            if (isOpen) {
                gsap.to(targetCard.cardBody, {
                    height: 0,
                    padding: 0,
                    opacity: 0,
                    duration: 0.8,
                    ease: "power2.inOut"
                });
                gsap.to(targetCard.toggleIcon, {
                    opacity: 0,
                    duration: 0.3,
                    ease: "power2.inOut",
                    onComplete: () => {
                        targetCard.toggleIcon.classList.remove('fa-minus');
                        targetCard.toggleIcon.classList.add('fa-plus');
                        gsap.to(targetCard.toggleIcon, { opacity: 1, duration: 0.15, ease: "power2.inOut" });
                    }
                });
            } else {
                gsap.to(targetCard.cardBody, {
                    height: "auto",
                    padding: "1rem",
                    opacity: 1,
                    duration: 0.8,
                    ease: "power2.inOut"
                });
                gsap.to(targetCard.toggleIcon, {
                    opacity: 0,
                    duration: 0.3,
                    ease: "power2.inOut",
                    onComplete: () => {
                        targetCard.toggleIcon.classList.remove('fa-plus');
                        targetCard.toggleIcon.classList.add('fa-minus');
                        gsap.to(targetCard.toggleIcon, { opacity: 1, duration: 0.15, ease: "power2.inOut" });
                    }
                });
            }
            validateFields(cardFields[targetCard.cardId].fields, cardFields[targetCard.cardId].specialCases, targetCard.cardId);
        };
    
        // Header click event
        header.addEventListener('click', () => {
            const currentCard = cards.find(card => card.header === header);
            if ((!header.classList.contains('disabled'))) {
                toggleCard(currentCard);
            } 
        });
        if (nextButton) {
            nextButton.addEventListener('click', (e) => {
                e.preventDefault(); 
                const currentOpenCard = cards.find(card => card.cardBody.style.height && card.cardBody.style.height !== '0px');
                const currentIndex = currentOpenCard ? cards.indexOf(currentOpenCard) : -1;
                const nextIndex = currentIndex + 1 < cards.length ? currentIndex + 1 : 0; 
                const nextCard = cards[nextIndex];
    
                const isValid = validateFields(cardFields[currentOpenCard.cardId].fields, cardFields[currentOpenCard.cardId].specialCases, currentOpenCard.cardId);

                if (isValid && nextCard) {
                    nextCard.header.classList.remove('disabled');
                    toggleCard(currentOpenCard);
                    toggleCard(nextCard);
                }
            });
        }
    }
    document.querySelectorAll('.card-header[data-toggle-target]').forEach(header => {
        const bodyId = header.getAttribute('data-toggle-target');
        const cardId = bodyId; 
        setupCardToggle(`[data-toggle-target="${bodyId}"]`, `#${bodyId}`, cardId);

    });

    //address 
    const sameAddressCheckbox = document.getElementById("sameAddress");
    const permanentAddress = document.getElementById("permanentAddress");
    const currentAddress = document.getElementById("currentAddress");
    const permanentAddressContainer = document.getElementById("permanentAddress-container");
    function syncAddress() {
        permanentAddress.value = currentAddress.value;
    }
    function handleSameAddressChange() {
        const isChecked = sameAddressCheckbox.checked;
        permanentAddress.value = isChecked ? currentAddress.value : "";
        permanentAddress.toggleAttribute("readonly", isChecked);
        permanentAddressContainer.style.display = isChecked ? "none" : "block";
        permanentAddress.dispatchEvent(new Event("input"));

        if (isChecked) {
            currentAddress.addEventListener("input", syncAddress);
        } else {
            currentAddress.removeEventListener("input", syncAddress);
        }
    }
    handleSameAddressChange();
    sameAddressCheckbox.addEventListener("change", handleSameAddressChange);

    // Function to copy address as user types
    function syncAddress() {
        document.getElementById("permanentAddress").value = document.getElementById("currentAddress").value;
    }

    // Name Validation: Only Letters Allowed (No Spaces, Digits, or Special Characters)
    function setupNameValidation(fieldId, errorId) {
    const field = document.getElementById(fieldId);
    if (!field) return;

        field.addEventListener("input", function () {
            this.value = this.value.replace(/[^A-Za-z]/g, "");
            if (this.value) {
                hideError(errorId);
            } else {
                showError(errorId, "Only letters are allowed.");
            }
        });
    }
    setupNameValidation("name", "name");
    setupNameValidation("lastName", "lastName");

    // Function to validate pincode fields
    function validatePincode(event) {
        let pincodeField = event.target;
        let errorElement = document.getElementById(pincodeField.id + "Error");

        pincodeField.value = pincodeField.value.replace(/\D/g, "").slice(0, 6);

        if (this.value.length === 6) {
            hideError(pincodeField.id);
        } else {
            showError(pincodeField.id, "Pincode must be exactly 6 digits.");
        }
        toggleVisibility(pincodeField.id);
    }

    // Attach validation to both pincode fields
    document.getElementById("pincode").addEventListener("input", validatePincode);
    document.getElementById("address_pincode").addEventListener("input", validatePincode);

    // Function to check if a field is visible
    function isFieldVisible(fieldId) {
        const field = document.getElementById(`${fieldId}-container`);
        return field && field.style.display !== "none";
    }

    // Function to display error messages
    function showError(fieldId, message) {
        const errorElement = document.getElementById(`${fieldId}Error`);
        if (errorElement) {
            errorElement.textContent = message;
            errorElement.style.display = "block";
        }
    }

    // Function to hide error messages
    function hideError(fieldId) {
        const errorElement = document.getElementById(`${fieldId}Error`);
        if (errorElement) {
            errorElement.textContent = "";
            errorElement.style.display = "none";
        }
    }


    // Attach the validation function to the form's submit event
    const form = document.getElementById("myForm");
    if (form) {
        form.addEventListener("submit", validateForm);
    }

    // ✅ Add real-time error hiding
    function addRealTimeValidation(fieldId, eventType = "input") {
        const field = document.getElementById(fieldId);
        if (field) {
            field.addEventListener(eventType, function () {
                if (field.value.trim()) {
                    hideError(fieldId);
                }
            });
        }
    }

    // ✅ Apply real-time validation to text fields
    const realTimeTextFields = ["referralCode", "name", "dob", "currentAddress", "permanentAddress", "pincode", "address_pincode"];
    realTimeTextFields.forEach((fieldId) => addRealTimeValidation(fieldId));

    // ✅ Apply real-time validation to dropdowns
    const realTimeSelectFields = ["blood_group", "profession","studentType","university", "institute", "course","collegeStudentType","socialWorkArea","teacherType","professionType","professionSubType","industrialistType","businessType","address_nagar","nagar", "address_state", "state","sakha_milan2","activity", "upbasti", "ekai", "prant", "vibhag", "jila", "ekai_nagar", "mandal", "basti", "sakha_milan", "dayitva", "vividhSangathan",
        "sangh_shikshan_level", "prarambhik_year", "pratham_year", "prathmik_year", "dwitiya_year", "tritiya_year"
    ];
    realTimeSelectFields.forEach((fieldId) => {
        const field = document.getElementById(fieldId);
        if (field) {
            field.addEventListener("change", function () {
                if (field.value) {
                    hideError(fieldId);
                }
            });
        }
    });



    //  Real-time validation for gender selection
    document.querySelectorAll('input[name="gender"]').forEach((radio) => {
        radio.addEventListener("change", function () {
            hideError("gender");
        });
    });
    document.querySelectorAll('input[name="rss_association"]').forEach((radio) => {
        radio.addEventListener("change", function () {
            hideError("rssAssociation");
        });
    });
    document.querySelectorAll('input[name="responsibility_yes_no"]').forEach((radio) => {
        radio.addEventListener("change", function () {
            hideError("responsibility");
        });
    });
    document.querySelectorAll('input[name="pratigya"]').forEach((radio) => {
        radio.addEventListener("change", function () {
            hideError("pratigyaCheckbox");
        });
    });
    document.querySelectorAll('#socialInterests-container input[type="checkbox"]').forEach((checkbox) => {
        checkbox.addEventListener("change", function () {
            const checkboxes = document.querySelectorAll('#socialInterests-container input[type="checkbox"]:checked');
            const errorElement = document.getElementById("socialInterestsError");
            if (checkboxes.length === 0) {
                showError(errorElement, "Please select at least one option");
            } else {
                hideError("socialInterests");
            }
        });
    });
    document.querySelectorAll('input[name="ekai_milaan"]').forEach((radio) => {
        radio.addEventListener("change", function () {
            hideError("sakha_milanCheckbox");
        });
    });

    // Function to open the modal and populate it with form data
    function openModal() {
        const modal = document.getElementById('formModal');
        modal.style.display = 'flex';   
        function setModalContent(fieldId, modalElementId, modalContainerId) {
            const field = document.getElementById(fieldId);
            const modalContainer = document.getElementById(modalContainerId);
            if (isFieldVisible(fieldId)) {
                modalContainer.style.display = 'table-row'; 
                document.getElementById(modalElementId).textContent = field.value || 'N/A';
            } else {
                modalContainer.style.display = 'none'; 
            }
        }

        function setRadioModalContent(radioId,radioName, modalElementId, modalContainerId) {
            const radioField = document.querySelector(`input[name="${radioName}"]:checked`);
            const modalContainer = document.getElementById(modalContainerId);
            
            if (radioField && isFieldVisible(radioId)) {
                modalContainer.style.display = 'table-row'; 
                document.getElementById(modalElementId).textContent = radioField.value;
            } else {
                modalContainer.style.display = 'none'; 
            }
        }
        function setCheckboxContent(containerId, modalElementId, modalContainerId){
            console.log(isFieldVisible(containerId));
            if(!isFieldVisible(containerId))return;
            const id = `#${containerId}-container input[type= "checkbox"]`;
            const checkboxes = document.querySelectorAll(`${id}`);
            document.getElementById(modalContainerId).style.display = 'table-row';
            let vadyaRow = document.getElementById(modalElementId);
            checkboxes.forEach((checkbox, ind) => { 
                if(checkbox.checked) vadyaRow.textContent += ` ${checkbox.value},`;
            })
            if (vadyaRow.textContent.endsWith(",")) {
                vadyaRow.textContent = vadyaRow.textContent.slice(0, -1).trim();
            }
        }

        setModalContent('referralCode', 'modalReferralCode', 'modalReferralCodeContainer');
        setModalContent('name', 'modalName', 'modalNameContainer');
        setModalContent('lastName', 'modalLastName', 'modalLastNameContainer');
        // setModalContent('phone', 'modalPhone', 'modalPhoneContainer');
        // setModalContent('confirmPhone', 'modalConfirmPhone', 'modalConfirmPhoneContainer');
        // setModalContent('email', 'modalEmail', 'modalEmailContainer');
        // setModalContent('confirmEmail', 'modalConfirmEmail', 'modalConfirmEmailContainer');
        setModalContent('dob', 'modalDOB', 'modalDOBContainer');
        setModalContent('blood_group', 'modalBloodGroup', 'modalBloodGroupContainer');
        setModalContent('profession', 'modalProfession', 'modalProfessionContainer');
        //conditional fields
        setModalContent("studentType",'modalStudentType', 'modalStudentTypeContainer');
        setModalContent('university', 'modalUniversity', 'modalUniversityContainer');
        setModalContent('institute', 'modalInstitute', 'modalInstituteContainer');
        setModalContent('collegeStudentType', 'modalCollegeStudentType', 'modalCollegeStudentTypeContainer');
        setModalContent('course', 'modalCourse', 'modalCourseContainer');
        // setModalContent('stream', 'modalStream', 'modalStreamContainer');
        setModalContent('socialWorkArea', 'modalSocialWorkArea', 'modalSocialWorkAreaContainer');
        setModalContent('teacherType', 'modalTeacherType', 'modalTeacherTypeContainer');
        setModalContent('professionType', 'modalProfessionType', 'modalProfessionTypeContainer');
        setModalContent('professionSubType', 'modalProfessionSubType', 'modalProfessionSubTypeContainer');
        setModalContent('industrialistType', 'modalIndustrialistType', 'modalIndustrialistTypeContainer');
        setModalContent('businessType', 'modalBusinessType', 'modalBusinessTypeContainer');

        setModalContent('currentAddress', 'modalCurrentAddress', 'modalCurrentAddressContainer');
        setModalContent('permanentAddress', 'modalPermanentAddress', 'modalPermanentAddressContainer');
        setModalContent('address_pincode', 'modalAddressPincode', 'modalAddressPincodeContainer');
        setModalContent('address_nagar', 'modalAddressNagar', 'modalAddressNagarContainer');
        setModalContent('address_state', 'modalAddressState', 'modalAddressStateContainer');
        //part-2
        setRadioModalContent('rssAssociation','rss_association', 'modalRssAssociation', 'modalRssAssociationContainer');
        setModalContent('sakha_milan2', 'modalSakhaMilan2', 'modalSakhaMilan2Container');
        setModalContent('activity', 'modalActivity', 'modalActivityContainer');
        setModalContent('vividhSangathan', 'modalVividhSangathan', 'modalVividhSangathanContainer');
        setCheckboxContent("socialInterests", "modalSocialInterests", "modalSocialInterestsContainer");
        setRadioModalContent('responsibility','responsibility_yes_no', 'modalResponsibility', 'modalResponsibilityContainer');
        setModalContent('pincode', 'modalPincode', 'modalPincodeContainer');
        setModalContent('nagar', 'modalNagar', 'modalNagarContainer');
        setModalContent('state', 'modalState', 'modalStateContainer');
        setModalContent('upbasti', 'modalUpbasti', 'modalUpbastiContainer');
        setModalContent('ekai', 'modalEkai', 'modalEkaiContainer');
        setModalContent('prant', 'modalPrant', 'modalPrantContainer');
        setModalContent('vibhag', 'modalVibhag', 'modalVibhagContainer');
        setModalContent('jila', 'modalJila', 'modalJilaContainer');
        setModalContent('ekai_nagar', 'modalEkaiNagar', 'modalEkaiNagarContainer');
        setModalContent('mandal', 'modalMandal', 'modalMandalContainer');
        setModalContent('basti', 'modalBasti', 'modalBastiContainer');
        setRadioModalContent("sakha_milanCheckbox",'ekai_milaan', 'modalSakhaMilanCheckbox', 'modalSakhaMilanCheckboxContainer');
        setModalContent('sakha_milan', 'modalSakhaMilan', 'modalSakhaMilanContainer');
        setModalContent('dayitva', 'modalDayitva', 'modalDayitvaContainer');
        setModalContent('sangh_shikshan_level', 'modalSanghSikshanLevel', 'modalSanghSikshanLevelContainer');
        setRadioModalContent('pratigyaCheckbox','pratigya', 'modalPratigyaCheckbox', 'modalPratigyaCheckboxContainer');
        setModalContent('prarambhik_year', 'modalPrarambhikYear', 'modalPrarambhikYearContainer');
        setModalContent('prathmik_year', 'modalPrathmikYear', 'modalPrathmikYearContainer');
        setModalContent('pratham_year', 'modalPrathamYear', 'modalPrathamYearContainer');
        setModalContent('dwitiya_year', 'modalDwitiyaYear', 'modalDwitiyaYearContainer');
        setModalContent('tritiya_year', 'modalTritiyaYear', 'modalTritiyaYearContainer');
        setRadioModalContent("ghoshVadakNo",'learn_vadya', 'modalLearnVadya', 'modalLearnVadyaContainer');
        setRadioModalContent("ghoshVadakNo",'learn_vadya_list', 'modalLearnVadyaList', 'modalLearnVadyaListContainer');
        setCheckboxContent("ganvesh", "modalGanvesh", "modalGanveshContainer");
        setRadioModalContent("gender",'gender', 'modalGender', 'modalGenderContainer');
        setRadioModalContent("ghosh_vadak",'ghosh_vadak', 'modalGhoshVadak', 'modalGhoshVadakContainer');
        if (document.querySelector('input[name="ghosh_vadak"]:checked')?.value === 'हाँ') {
            setCheckboxContent("vadya", "modalVadya", "modalVadyaContainer");
            setRadioModalContent('shankhShrungOwn','shankh_shrung_own', 'modalShankhShrungOwn', 'modalShankhShrungOwnContainer');
            setRadioModalContent('rachnaye','rachnaye', 'modalRachnaye', 'modalRachnayeContainer');
        } else {
            document.getElementById("vadya-container").style.display = "none";
            document.getElementById('modalShankhShrungOwnContainer').style.display = 'none';
            document.getElementById('modalRachnayeContainer').style.display = 'none';
        }
    }
    function isFieldVisible(fieldId) {
        let field = document.getElementById(`${fieldId}-container`);
        return field && field.style.display !== "none";
    }
    
    document.querySelector(".class-modal").addEventListener('click', function () {
        document.getElementById("formModal").style.display = "none";
    })

    document.getElementById('finalSubmit').addEventListener('click', function (event) {
        event.preventDefault();

        Swal.fire({
            title: '!!..धन्यवाद..!!',
            html: 'आपने अपना पंजीकरण सफलतापूर्वक पूर्ण कर लिया है। <br>आपके "QR Code" की जानकारी दिए गए 👉 "SBRPLR SMS Code" 👈 द्वारा आपको शीघ्र भेजी जाएगी।',
            icon: 'success',
            confirmButtonText: 'ठीक है'
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('myForm').submit();
            }
        });
    });
});

   </script>
   <script type="text/javascript">
      history.pushState(null, null, window.location.href);
      window.addEventListener('popstate', function () {
      history.pushState(null, null, window.location.href);
      });
   </script>

   <script type="text/javascript">
   </script>
</body>

</html>