<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="{% static 'register_samautkarsh/assets/img/Samutkarsh_logo.png' %}" type="image/x-icon" />
  <title>Superadmin Dashboard</title>

  <!-- ========== All CSS files linkup ========= -->
  <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/css/lineicons.css' %}" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="{% static 'assets/css/materialdesignicons.min.css' %}" rel="stylesheet"
    type="text/css" />
  <!-- ======== Ajax Scripts =========== -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="{% static 'assets/css/fullcalendar.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/css/fullcalendar.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/css/main.css' %}" />
</head>

<body>
  <!-- ======== Preloader =========== -->
  <div id="preloader">
      <div class="spinner"></div>
    </div>
  <!-- ======== Preloader =========== -->

  <!-- ======== sidebar-nav start =========== -->
  <aside class="sidebar-nav-wrapper" >
    <div class="navbar-logo text-center"
      style="display: flex; align-items: center; justify-content: center; padding: 10px 0;">

      <a href="{% url 'superadmin_dashboard' %}" style="text-decoration: none;">
        <img src="{% static 'register_samautkarsh/assets/img/Samutkarsh_logo.png' %}" alt="logo" style="width: 50px; height: 50px; margin-bottom: 10px;"/>
        <h1 class="logo-text text-center" style="font-size: 10px; font-weight: bold; color: #4A148C; letter-spacing: 1px; transition: color 0.3s ease;">
          <span style="font-size: 10px;">S</span>AMUTKARSH <br><span style="font-size: 10px;">A</span>DMIN
        </h1>
      </a>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li class="nav-item nav-item-has-children">
          <a href="#0" data-bs-toggle="collapse" data-bs-target="#ddmenu_1" aria-controls="ddmenu_1"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M8.74999 18.3333C12.2376 18.3333 15.1364 15.8128 15.7244 12.4941C15.8448 11.8143 15.2737 11.25 14.5833 11.25H9.99999C9.30966 11.25 8.74999 10.6903 8.74999 10V5.41666C8.74999 4.7263 8.18563 4.15512 7.50586 4.27556C4.18711 4.86357 1.66666 7.76243 1.66666 11.25C1.66666 15.162 4.83797 18.3333 8.74999 18.3333Z" />
                <path
                  d="M17.0833 10C17.7737 10 18.3432 9.43708 18.2408 8.75433C17.7005 5.14918 14.8508 2.29947 11.2457 1.75912C10.5629 1.6568 10 2.2263 10 2.91665V9.16666C10 9.62691 10.3731 10 10.8333 10H17.0833Z" />
              </svg>
            </span>
            <span class="text">Dashboard</span>
          </a>
          <ul id="ddmenu_1" class="collapse show dropdown-nav">
            {% comment %} <li>
              <a href="" class="active"> Samatukarsh </a>
            </li> {% endcomment %}
          <li
            style="display: flex; align-items: center; gap: 10px; padding: 5px 10px; border-radius: 8px; transition: background 0.3s ease; list-style: none;"
            onmouseover="this.style.background='#f1f1f1'; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='orange';"
            onmouseout="this.style.background=''; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='#333';">

            <i class="mdi mdi-map-outline" style="font-size: 14px; color: #F14A00; transition: color 0.3s ease;"></i>

            <span class="text">
              <a href="{% url 'admin' %}" class="active"
                style="font-size: 12px; font-weight: bold; text-decoration: none; color: #333; transition: color 0.3s ease;">
                Requests Status
              </a>
            </span>
          </li>
              
            <li
              style="display: flex; align-items: center; gap: 10px; padding: 5px 10px; border-radius: 8px; transition: background 0.3s ease; list-style: none;"
              onmouseover="this.style.background='#f1f1f1'; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='orange';"
              onmouseout="this.style.background=''; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='#333';">

              <i class="mdi mdi-map-outline" style="font-size: 14px; color: #F14A00; transition: color 0.3s ease;"></i>

              <span class="text">
                <a href="{% url 'superadmin_userRole' %}" class="active"
                  style="font-size: 12px; font-weight: bold; text-decoration: none; color: #333; transition: color 0.3s ease;">
                  Assign Roles
                </a>
              </span>
            </li>

            <li
              style="display: flex; align-items: center; gap: 10px; padding: 5px 10px; border-radius: 8px; transition: background 0.3s ease; list-style: none;"
              onmouseover="this.style.background='#f1f1f1'; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='orange';"
              onmouseout="this.style.background=''; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='#333';">

              <i class="mdi mdi-map-outline" style="font-size: 14px; color: #F14A00; transition: color 0.3s ease;"></i>

              <span class="text">
                <a href="{% url 'superadmin_dashboard_totalregistercount' %}" class="active"
                  style="font-size: 12px; font-weight: bold; text-decoration: none; color: #333; transition: color 0.3s ease;">
                  User & Scan Count
                </a>
              </span>
            </li>

            <li
              style="display: flex; align-items: center; gap: 10px; padding: 5px 10px; border-radius: 8px; transition: background 0.3s ease; list-style: none;"
              onmouseover="this.style.background='#f1f1f1'; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='orange';"
              onmouseout="this.style.background=''; this.querySelector('i').style.color='orange'; this.querySelector('.text a').style.color='#333';">

              <i class="mdi mdi-map-outline" style="font-size: 14px; color: #F14A00; transition: color 0.3s ease;"></i>

              <span class="text">
                <a href="{% url 'superadmin_dashboard_totalothercount' %}" class="active"
                  style="font-size: 12px; font-weight: bold; text-decoration: none; color: #333; transition: color 0.3s ease;">
                  User & other Scan Count
                </a>
              </span>
            </li>

          </ul>
        </li>
      </ul>
    </nav>
    <!-- <div class="promo-box">
      <div class="promo-icon">
        <img class="mx-auto" src="{% static 'register_samautkarsh/assets/img/Samutkarsh_logo.png' %}" alt="Logo">
      </div>
    </div> -->
  </aside>
  <div class="overlay"></div>
  <!-- ======== sidebar-nav end =========== -->
  <!-- ======== Sidebar End =========== -->

  <!-- ======== main-wrapper start =========== -->
  <main class="main-wrapper">
    <!-- ========== header start ========== -->
    {% include 'Navigation/navbar.html' %}
    <!-- ========== header end ========== -->
    {% block content %}
 

    {% include 'Navigation/dashboard.html' %}

    {% endblock %}


    {% include 'Navigation/footer.html' %}
  </main>
  <!-- ======== main-wrapper end =========== -->

  <!-- ========= All viavascript files linkup ======== -->
  <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/js/Chart.min.js' %}"></script>
  <script src="{% static 'assets/js/dynamic-pie-chart.' %}"></script>
  <script src="{% static 'assets/js/moment.min.js' %}"></script>
  <script src="{% static 'assets/js/fullcalendar.js' %}"></script>
  <script src="{% static 'assets/js/jvectormap.min.js' %}"></script>
  <script src="{% static 'assets/js/world-merc.js' %}"></script>
  <script src="{% static 'assets/js/polyfill.js' %}"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>
</body>

</html>

<script>
  // ======== jvectormap activation
  var markers = [
    { name: "Egypt", coords: [26.8206, 30.8025] },
    { name: "Russia", coords: [61.524, 105.3188] },
    { name: "Canada", coords: [56.1304, -106.3468] },
    { name: "Greenland", coords: [71.7069, -42.6043] },
    { name: "Brazil", coords: [-14.235, -51.9253] },
  ];

  var jvm = new jsVectorMap({
    map: "world_merc",
    selector: "#map",
    zoomButtons: true,

    regionStyle: {
      initial: {
        fill: "#d1d5db",
      },
    },

    labels: {
      markers: {
        render: (marker) => marker.name,
      },
    },

    markersSelectable: true,
    selectedMarkers: markers.map((marker, index) => {
      var name = marker.name;

      if (name === "Russia" || name === "Brazil") {
        return index;
      }
    }),
    markers: markers,
    markerStyle: {
      initial: { fill: "#4A6CF7" },
      selected: { fill: "#ff5050" },
    },
    markerLabelStyle: {
      initial: {
        fontWeight: 400,
        fontSize: 14,
      },
    },
  });
  // ====== calendar activation
  document.addEventListener("DOMContentLoaded", function () {
    var calendarMiniEl = document.getElementById("calendar-mini");
    var calendarMini = new FullCalendar.Calendar(calendarMiniEl, {
      initialView: "dayGridMonth",
      headerToolbar: {
        end: "today prev,next",
      },
    });
    calendarMini.render();
  });

  // =========== chart one start
  const ctx1 = document.getElementById("Chart1").getContext("2d");
  const chart1 = new Chart(ctx1, {
    type: "line",
    data: {
      labels: [
        "Jan",
        "Fab",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],
      datasets: [
        {
          label: "",
          backgroundColor: "transparent",
          borderColor: "#365CF5",
          data: [
            600, 800, 750, 880, 940, 880, 900, 770, 920, 890, 976, 1100,
          ],
          pointBackgroundColor: "transparent",
          pointHoverBackgroundColor: "#365CF5",
          pointBorderColor: "transparent",
          pointHoverBorderColor: "#fff",
          pointHoverBorderWidth: 5,
          borderWidth: 5,
          pointRadius: 8,
          pointHoverRadius: 8,
          cubicInterpolationMode: "monotone", // Add this line for curved line
        },
      ],
    },
    options: {
      plugins: {
        tooltip: {
          callbacks: {
            labelColor: function (context) {
              return {
                backgroundColor: "#ffffff",
                color: "#171717"
              };
            },
          },
          intersect: false,
          backgroundColor: "#f9f9f9",
          title: {
            fontFamily: "Plus Jakarta Sans",
            color: "#8F92A1",
            fontSize: 12,
          },
          body: {
            fontFamily: "Plus Jakarta Sans",
            color: "#171717",
            fontStyle: "bold",
            fontSize: 16,
          },
          multiKeyBackground: "transparent",
          displayColors: false,
          padding: {
            x: 30,
            y: 10,
          },
          bodyAlign: "center",
          titleAlign: "center",
          titleColor: "#8F92A1",
          bodyColor: "#171717",
          bodyFont: {
            family: "Plus Jakarta Sans",
            size: "16",
            weight: "bold",
          },
        },
        legend: {
          display: false,
        },
      },
      responsive: true,
      maintainAspectRatio: false,
      title: {
        display: false,
      },
      scales: {
        y: {
          grid: {
            display: false,
            drawTicks: false,
            drawBorder: false,
          },
          ticks: {
            padding: 35,
            max: 1200,
            min: 500,
          },
        },
        x: {
          grid: {
            drawBorder: false,
            color: "rgba(143, 146, 161, .1)",
            zeroLineColor: "rgba(143, 146, 161, .1)",
          },
          ticks: {
            padding: 20,
          },
        },
      },
    },
  });
  // =========== chart one end

  // =========================================================== chart two start ===============================================================
  // Fetch the data from Django API
  document.getElementById("nagarDropdown").addEventListener("change", function () {
    const selectedNagar = this.value; // Get selected nagar
    updateChart(selectedNagar); // Call function to update chart
  });

  function updateChart(nagar) {
    let apiUrl = "/dashboard/superadmin_dashboard/nagar-chart-data/";
    
    if (nagar) {
      apiUrl += `?nagar=${encodeURIComponent(nagar)}`; // Append selected nagar to URL
    }

    fetch(apiUrl)
      .then((response) => response.json())
      .then((chartData) => {
        const ctx2 = document.getElementById("Chart2").getContext("2d");

        if (window.myChart) {
          window.myChart.destroy(); // Destroy previous chart before creating a new one
        }

        window.myChart = new Chart(ctx2, {
          type: "bar",
          data: {
            labels: chartData.labels,
            datasets: [
              {
                label: "Nagar Count",
                backgroundColor: "#365CF5",
                borderRadius: 10,
                barThickness: 10,
                maxBarThickness: 12,
                data: chartData.data,
              },
            ],
          },
          options: {
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `${context.dataset.label}: ${context.parsed.y}`;
                  },
                },
                backgroundColor: "#F3F6F8",
                titleColor: "#8F92A1",
                bodyColor: "#272727",
                titleFont: {
                  size: 16,
                  family: "Plus Jakarta Sans",
                  weight: "400",
                },
                titleAlign: "center",
                bodyAlign: "center",
                displayColors: false,
                padding: { x: 20, y: 10 },
              },
            },
            legend: { display: false },
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                grid: { display: false },
                ticks: { padding: 10, beginAtZero: true },
              },
              x: {
                grid: { display: false },
                ticks: { padding: 10 },
              },
            },
          },
        });
      })
      .catch((error) => console.error("Error fetching chart data:", error));
  }

  // Load the chart initially without any filter
  updateChart("");


  // =================================================================== chart two end ===============================================================

  // =========== chart three start
  const ctx3 = document.getElementById("Chart3").getContext("2d");
  const chart3 = new Chart(ctx3, {
    type: "line",
    data: {
      labels: [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "Jun",
        "Jul",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ],
      datasets: [
        {
          label: "Revenue",
          backgroundColor: "transparent",
          borderColor: "#365CF5",
          data: [80, 120, 110, 100, 130, 150, 115, 145, 140, 130, 160, 210],
          pointBackgroundColor: "transparent",
          pointHoverBackgroundColor: "#365CF5",
          pointBorderColor: "transparent",
          pointHoverBorderColor: "#365CF5",
          pointHoverBorderWidth: 3,
          pointBorderWidth: 5,
          pointRadius: 5,
          pointHoverRadius: 8,
          fill: false,
          tension: 0.4,
        },
        {
          label: "Profit",
          backgroundColor: "transparent",
          borderColor: "#9b51e0",
          data: [
            120, 160, 150, 140, 165, 210, 135, 155, 170, 140, 130, 200,
          ],
          pointBackgroundColor: "transparent",
          pointHoverBackgroundColor: "#9b51e0",
          pointBorderColor: "transparent",
          pointHoverBorderColor: "#9b51e0",
          pointHoverBorderWidth: 3,
          pointBorderWidth: 5,
          pointRadius: 5,
          pointHoverRadius: 8,
          fill: false,
          tension: 0.4,
        },
        {
          label: "Order",
          backgroundColor: "transparent",
          borderColor: "#f2994a",
          data: [180, 110, 140, 135, 100, 90, 145, 115, 100, 110, 115, 150],
          pointBackgroundColor: "transparent",
          pointHoverBackgroundColor: "#f2994a",
          pointBorderColor: "transparent",
          pointHoverBorderColor: "#f2994a",
          pointHoverBorderWidth: 3,
          pointBorderWidth: 5,
          pointRadius: 5,
          pointHoverRadius: 8,
          fill: false,
          tension: 0.4,
        },
      ],
    },
    options: {
      plugins: {
        tooltip: {
          intersect: false,
          backgroundColor: "#fbfbfb",
          titleColor: "#8F92A1",
          bodyColor: "#272727",
          titleFont: {
            size: 16,
            family: "Plus Jakarta Sans",
            weight: "400",
          },
          bodyFont: {
            family: "Plus Jakarta Sans",
            size: 16,
          },
          multiKeyBackground: "transparent",
          displayColors: false,
          padding: {
            x: 30,
            y: 15,
          },
          borderColor: "rgba(143, 146, 161, .1)",
          borderWidth: 1,
          enabled: true,
        },
        title: {
          display: false,
        },
        legend: {
          display: false,
        },
      },
      layout: {
        padding: {
          top: 0,
        },
      },
      responsive: true,
      // maintainAspectRatio: false,
      legend: {
        display: false,
      },
      scales: {
        y: {
          grid: {
            display: false,
            drawTicks: false,
            drawBorder: false,
          },
          ticks: {
            padding: 35,
          },
          max: 350,
          min: 50,
        },
        x: {
          grid: {
            drawBorder: false,
            color: "rgba(143, 146, 161, .1)",
            drawTicks: false,
            zeroLineColor: "rgba(143, 146, 161, .1)",
          },
          ticks: {
            padding: 20,
          },
        },
      },
    },
  });
  // =========== chart three end

  // ================== chart four start
  const ctx4 = document.getElementById("Chart4").getContext("2d");
  const chart4 = new Chart(ctx4, {
    type: "bar",
    data: {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
      datasets: [
        {
          label: "",
          backgroundColor: "#365CF5",
          borderColor: "transparent",
          borderRadius: 20,
          borderWidth: 5,
          barThickness: 20,
          maxBarThickness: 20,
          data: [600, 700, 1000, 700, 650, 800],
        },
        {
          label: "",
          backgroundColor: "#d50100",
          borderColor: "transparent",
          borderRadius: 20,
          borderWidth: 5,
          barThickness: 20,
          maxBarThickness: 20,
          data: [690, 740, 720, 1120, 876, 900],
        },
      ],
    },
    options: {
      plugins: {
        tooltip: {
          backgroundColor: "#F3F6F8",
          titleColor: "#8F92A1",
          titleFontSize: 12,
          bodyColor: "#171717",
          bodyFont: {
            weight: "bold",
            size: 16,
          },
          multiKeyBackground: "transparent",
          displayColors: false,
          padding: {
            x: 30,
            y: 10,
          },
          bodyAlign: "center",
          titleAlign: "center",
          enabled: true,
        },
        legend: {
          display: false,
        },
      },
      layout: {
        padding: {
          top: 0,
        },
      },
      responsive: true,
      // maintainAspectRatio: false,
      title: {
        display: false,
      },
      scales: {
        y: {
          grid: {
            display: false,
            drawTicks: false,
            drawBorder: false,
          },
          ticks: {
            padding: 35,
            max: 1200,
            min: 0,
          },
        },
        x: {
          grid: {
            display: false,
            drawBorder: false,
            color: "rgba(143, 146, 161, .1)",
            zeroLineColor: "rgba(143, 146, 161, .1)",
          },
          ticks: {
            padding: 20,
          },
        },
      },
    },
  });
  // =========== chart four end
</script>